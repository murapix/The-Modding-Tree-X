/* empty css                    */import"./vue.84036b60.js";import{Z as x,C as o,l as K,q as Je,t as C,b1 as ge,aa as V,aC as Zt,w as me,b2 as ke,a8 as p,O as X,ay as mt,ar as Ee,aE as h,a0 as N,aK as we,a1 as f,aG as tt,A as ae,_ as D,b6 as F,b8 as Mt,bs as Sn,aq as De,bu as Ze,bb as Ct,T as Mn,a7 as T,u as ht,j as Cn,bv as Lt,aL as ze,$,aN as Q,J as R,G as ne,I as de,aH as $e,aF as Te,z as Ce,bn as $n,br as Tn,aJ as Kt,al as rt,H as In,y as At,be as Pn}from"./@vue.4ce677c2.js";import{c as Yt}from"./nanoevents.1080beb7.js";import{L as Ne}from"./lz-string.731cedc5.js";import{Y as xn}from"./vue-next-select.fc90abc3.js";import{D as On}from"./vuedraggable.d7ae4e1e.js";import{p as Fn}from"./vue-textarea-autosize.35804eaf.js";import{s as En,u as Dn}from"./vue-toastification.4982b895.js";import{v as Vn,n as Rn}from"./workbox-window.8d14e8b7.js";import"./sortablejs.d0b0aa19.js";const Ln=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};Ln();const An="modulepreload",qt={},qn="./",at=function(t,n){return!n||n.length===0?t():Promise.all(n.map(s=>{if(s=`${qn}${s}`,s in qt)return;qt[s]=!0;const i=s.endsWith(".css"),r=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":An,i||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),i)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},Bn="./projInfo-schema.json",Un="Profectus",zn="A project made in Profectus",Gn="",Hn="",jn="",Wn="",Zn="0.0",Kn="Initial Commit",Yn=!0,Jn=!1,Xn=2,Qn=!0,es=null,ts="",ns=["main"],ss=3600,is=1,rs=!0,as="base64";var A={$schema:Bn,title:Un,description:zn,id:Gn,author:Hn,discordName:jn,discordLink:Wn,versionNumber:Zn,versionTitle:Kn,allowGoBack:Yn,defaultShowSmall:Jn,defaultDecimalsShown:Xn,useHeader:Qn,banner:es,logo:ts,initialTabs:ns,maxTickLength:ss,offlineLimit:is,enablePausing:rs,exportEncoding:as};class os{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const s=new ls(t,n);for(this.first===void 0?(this.first=s,this.last=s):(s.next=this.first,this.first.prev=s,this.first=s),this.map.set(t,s);this.map.size>this.maxSize;){const i=this.last;this.map.delete(i.key),this.last=i.prev,this.last.next=void 0}}}class ls{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const bt=17,us=9e15,cs=Math.log10(9e15),ds=1/9e15,fs=308,ms=-324,Bt=5,hs=(1<<10)-1,gs=function(){const e=[];for(let n=ms+1;n<=fs;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Ie=[2,Math.E,3,4,5,6,7,8,9,10],ps=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],vs=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let m=function(t){return g.fromValue_noAlloc(t)},O=function(e,t,n){return g.fromComponents(e,t,n)},E=function(t,n,s){return g.fromComponents_noNormalize(t,n,s)};const be=function(t,n){const s=n+1,i=Math.ceil(Math.log10(Math.abs(t))),r=Math.round(t*Math.pow(10,s-i))*Math.pow(10,i-s);return parseFloat(r.toFixed(Math.max(s-i,0)))},Nt=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},_s=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const s=e*e;let i=e;return n=n+1/(12*i),i=i*s,n=n+1/(360*i),i=i*s,n=n+1/(1260*i),i=i*s,n=n+1/(1680*i),i=i*s,n=n+1/(1188*i),i=i*s,n=n+691/(360360*i),i=i*s,n=n+7/(1092*i),i=i*s,n=n+3617/(122400*i),Math.exp(n)/t},Jt=.5671432904097838,Ut=function(e,t=1e-10){let n,s;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Jt;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(s=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(s-n)<t*Math.abs(s))return s;n=s}throw Error(`Iteration failed to converge: ${e.toString()}`)};function zt(e,t=1e-10){let n,s,i,r;if(!Number.isFinite(e.mag)||e.eq(g.dZero))return e;if(e.eq(g.dOne))return g.fromNumber(Jt);n=g.ln(e);for(let a=0;a<100;++a){if(s=n.neg().exp(),i=n.sub(e.mul(s)),r=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div(g.mul(2,n).add(2))))),g.abs(r.sub(n)).lt(g.abs(r).mul(t)))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)}const c=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof c?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/gs(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new c().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new c().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new c().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new c().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new c().fromDecimal(e)}static fromNumber(e){return new c().fromNumber(e)}static fromString(e){return new c().fromString(e)}static fromValue(e){return new c().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof c)return e;if(typeof e=="string"){const t=c.fromStringCache.get(e);return t!==void 0?t:c.fromString(e)}else return typeof e=="number"?c.fromNumber(e):c.dZero}static abs(e){return m(e).abs()}static neg(e){return m(e).neg()}static negate(e){return m(e).neg()}static negated(e){return m(e).neg()}static sign(e){return m(e).sign}static sgn(e){return m(e).sign}static round(e){return m(e).round()}static floor(e){return m(e).floor()}static ceil(e){return m(e).ceil()}static trunc(e){return m(e).trunc()}static add(e,t){return m(e).add(t)}static plus(e,t){return m(e).add(t)}static sub(e,t){return m(e).sub(t)}static subtract(e,t){return m(e).sub(t)}static minus(e,t){return m(e).sub(t)}static mul(e,t){return m(e).mul(t)}static multiply(e,t){return m(e).mul(t)}static times(e,t){return m(e).mul(t)}static div(e,t){return m(e).div(t)}static divide(e,t){return m(e).div(t)}static recip(e){return m(e).recip()}static reciprocal(e){return m(e).recip()}static reciprocate(e){return m(e).reciprocate()}static cmp(e,t){return m(e).cmp(t)}static cmpabs(e,t){return m(e).cmpabs(t)}static compare(e,t){return m(e).cmp(t)}static isNaN(e){return e=m(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=m(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return m(e).eq(t)}static equals(e,t){return m(e).eq(t)}static neq(e,t){return m(e).neq(t)}static notEquals(e,t){return m(e).notEquals(t)}static lt(e,t){return m(e).lt(t)}static lte(e,t){return m(e).lte(t)}static gt(e,t){return m(e).gt(t)}static gte(e,t){return m(e).gte(t)}static max(e,t){return m(e).max(t)}static min(e,t){return m(e).min(t)}static minabs(e,t){return m(e).minabs(t)}static maxabs(e,t){return m(e).maxabs(t)}static clamp(e,t,n){return m(e).clamp(t,n)}static clampMin(e,t){return m(e).clampMin(t)}static clampMax(e,t){return m(e).clampMax(t)}static cmp_tolerance(e,t,n){return m(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return m(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return m(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return m(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return m(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return m(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return m(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return m(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return m(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return m(e).gte_tolerance(t,n)}static pLog10(e){return m(e).pLog10()}static absLog10(e){return m(e).absLog10()}static log10(e){return m(e).log10()}static log(e,t){return m(e).log(t)}static log2(e){return m(e).log2()}static ln(e){return m(e).ln()}static logarithm(e,t){return m(e).logarithm(t)}static pow(e,t){return m(e).pow(t)}static pow10(e){return m(e).pow10()}static pow_base(e,t){return m(e).pow_base(t)}static root(e,t){return m(e).root(t)}static factorial(e,t){return m(e).factorial()}static gamma(e,t){return m(e).gamma()}static lngamma(e,t){return m(e).lngamma()}static exp(e){return m(e).exp()}static sqr(e){return m(e).sqr()}static sqrt(e){return m(e).sqrt()}static cube(e){return m(e).cube()}static cbrt(e){return m(e).cbrt()}static tetrate(e,t=2,n=E(1,0,1)){return m(e).tetrate(t,n)}static iteratedexp(e,t=2,n=E(1,0,1)){return m(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return m(e).iteratedlog(t,n)}static layeradd10(e,t){return m(e).layeradd10(t)}static layeradd(e,t,n=10){return m(e).layeradd(t,n)}static slog(e,t=10){return m(e).slog(t)}static lambertw(e){return m(e).lambertw()}static ssqrt(e){return m(e).ssqrt()}static pentate(e,t=2,n=E(1,0,1)){return m(e).pentate(t,n)}static sin(e){return m(e).sin()}static cos(e){return m(e).cos()}static tan(e){return m(e).tan()}static asin(e){return m(e).asin()}static acos(e){return m(e).acos()}static atan(e){return m(e).atan()}static sinh(e){return m(e).sinh()}static cosh(e){return m(e).cosh()}static tanh(e){return m(e).tanh()}static asinh(e){return m(e).asinh()}static acosh(e){return m(e).acosh()}static atanh(e){return m(e).atanh()}static affordGeometricSeries(e,t,n,s){return this.affordGeometricSeries_core(m(e),m(t),m(n),s)}static sumGeometricSeries(e,t,n,s){return this.sumGeometricSeries_core(e,m(t),m(n),s)}static affordArithmeticSeries(e,t,n,s){return this.affordArithmeticSeries_core(m(e),m(t),m(n),m(s))}static sumArithmeticSeries(e,t,n,s){return this.sumArithmeticSeries_core(m(e),m(t),m(n),m(s))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(m(e),m(t),m(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return E(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return E(t,0,1);const n=Math.floor(Math.random()*(e+1));let s=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(s=Math.trunc(s));let i=Math.pow(10,s);return Math.random()>.9&&(i=Math.trunc(i)),O(t,n,i)}static affordGeometricSeries_core(e,t,n,s){const i=t.mul(n.pow(s));return c.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,s){return t.mul(n.pow(s)).mul(c.sub(1,n.pow(e))).div(c.sub(1,n))}static affordArithmeticSeries_core(e,t,n,s){const r=t.add(s.mul(n)).sub(n.div(2)),a=r.pow(2);return r.neg().add(a.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,s){const i=t.add(s.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<ds)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=us)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<cs&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=c.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const s=e.split("^^^");if(s.length===2){const w=parseFloat(s[0]),S=parseFloat(s[1]),U=s[1].split(";");let H=1;if(U.length===2&&(H=parseFloat(U[1]),isFinite(H)||(H=1)),isFinite(w)&&isFinite(S)){const b=c.pentate(w,S,H);return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}}const i=e.split("^^");if(i.length===2){const w=parseFloat(i[0]),S=parseFloat(i[1]),U=i[1].split(";");let H=1;if(U.length===2&&(H=parseFloat(U[1]),isFinite(H)||(H=1)),isFinite(w)&&isFinite(S)){const b=c.tetrate(w,S,H);return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}}const r=e.split("^");if(r.length===2){const w=parseFloat(r[0]),S=parseFloat(r[1]);if(isFinite(w)&&isFinite(S)){const U=c.pow(w,S);return this.sign=U.sign,this.layer=U.layer,this.mag=U.mag,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}}e=e.trim().toLowerCase();let a,l,u=e.split("pt");if(u.length===2){a=10,l=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let w=parseFloat(u[1]);if(isFinite(w)||(w=1),isFinite(a)&&isFinite(l)){const S=c.tetrate(a,l,w);return this.sign=S.sign,this.layer=S.layer,this.mag=S.mag,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}}if(u=e.split("p"),u.length===2){a=10,l=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let w=parseFloat(u[1]);if(isFinite(w)||(w=1),isFinite(a)&&isFinite(l)){const S=c.tetrate(a,l,w);return this.sign=S.sign,this.layer=S.layer,this.mag=S.mag,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}}const d=e.split("e"),v=d.length-1;if(v===0){const w=parseFloat(e);if(isFinite(w))return this.fromNumber(w),c.fromStringCache.size>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}else if(v===1){const w=parseFloat(e);if(isFinite(w)&&w!==0)return this.fromNumber(w),c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}const _=e.split("e^");if(_.length===2){this.sign=1,_[0].charAt(0)=="-"&&(this.sign=-1);let w="";for(let S=0;S<_[1].length;++S){const U=_[1].charCodeAt(S);if(U>=43&&U<=57||U===101)w+=_[1].charAt(S);else return this.layer=parseFloat(w),this.mag=parseFloat(_[1].substr(S+1)),this.normalize(),c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}}if(v<1)return this.sign=0,this.layer=0,this.mag=0,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this;const y=parseFloat(d[0]);if(y===0)return this.sign=0,this.layer=0,this.mag=0,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this;let k=parseFloat(d[d.length-1]);if(v>=2){const w=parseFloat(d[d.length-2]);isFinite(w)&&(k*=Math.sign(w),k+=Nt(w))}if(!isFinite(y))this.sign=d[0]==="-"?-1:1,this.layer=v,this.mag=k;else if(v===1)this.sign=Math.sign(y),this.layer=1,this.mag=k+Math.log10(Math.abs(y));else if(this.sign=Math.sign(y),this.layer=v,v===2){const w=c.mul(O(1,2,k),m(y));return this.sign=w.sign,this.layer=w.layer,this.mag=w.mag,c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}else this.mag=k;return this.normalize(),c.fromStringCache.maxSize>=1&&c.fromStringCache.set(t,c.fromDecimal(this)),this}fromValue(e){return e instanceof c?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:be(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:be(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Bt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):be(this.m,e)+"e"+be(this.e,e):this.layer===1?be(this.m,e)+"e"+be(this.e,e):this.layer<=Bt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+be(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+be(this.mag,e)}abs(){return E(this.sign===0?0:1,this.layer,this.mag)}neg(){return E(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?c.dZero:this.layer===0?O(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?c.dZero:this.layer===0?O(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?c.dZero:this.layer===0?O(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?c.dZero:this.layer===0?O(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=m(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return E(0,0,0);let n,s;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(c.cmpabs(this,t)>0?(n=this,s=t):(n=t,s=this),n.layer===0&&s.layer===0)return c.fromNumber(n.sign*n.mag+s.sign*s.mag);const i=n.layer*Math.sign(n.mag),r=s.layer*Math.sign(s.mag);if(i-r>=2)return n;if(i===0&&r===-1){if(Math.abs(s.mag-Math.log10(n.mag))>bt)return n;{const a=Math.pow(10,Math.log10(n.mag)-s.mag),l=s.sign+n.sign*a;return O(Math.sign(l),1,s.mag+Math.log10(Math.abs(l)))}}if(i===1&&r===0){if(Math.abs(n.mag-Math.log10(s.mag))>bt)return n;{const a=Math.pow(10,n.mag-Math.log10(s.mag)),l=s.sign+n.sign*a;return O(Math.sign(l),1,Math.log10(s.mag)+Math.log10(Math.abs(l)))}}if(Math.abs(n.mag-s.mag)>bt)return n;{const a=Math.pow(10,n.mag-s.mag),l=s.sign+n.sign*a;return O(Math.sign(l),1,s.mag+Math.log10(Math.abs(l)))}}plus(e){return this.add(e)}sub(e){return this.add(m(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=m(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return E(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return E(this.sign*t.sign,0,1);let n,s;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,s=t):(n=t,s=this),n.layer===0&&s.layer===0)return c.fromNumber(n.sign*s.sign*n.mag*s.mag);if(n.layer>=3||n.layer-s.layer>=2)return O(n.sign*s.sign,n.layer,n.mag);if(n.layer===1&&s.layer===0)return O(n.sign*s.sign,1,n.mag+Math.log10(s.mag));if(n.layer===1&&s.layer===1)return O(n.sign*s.sign,1,n.mag+s.mag);if(n.layer===2&&s.layer===1){const i=O(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(O(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)));return O(n.sign*s.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&s.layer===2){const i=O(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(O(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)));return O(n.sign*s.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=m(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?c.dNaN:this.layer===0?O(this.sign,0,1/this.mag):O(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=m(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=m(e),n=this.mag>0?this.layer:-this.layer,s=t.mag>0?t.layer:-t.layer;return n>s?1:n<s?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=m(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=m(e);return this.lt(t)?t:this}min(e){const t=m(e);return this.gt(t)?t:this}maxabs(e){const t=m(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=m(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=m(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=m(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let s=this.mag,i=n.mag;return this.layer>n.layer&&(i=Nt(i)),this.layer<n.layer&&(s=Nt(s)),Math.abs(s-i)<=t*Math.max(Math.abs(s),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=m(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=m(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=m(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=m(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(c.dZero)?c.dZero:this.log10()}absLog10(){return this.sign===0?c.dNaN:this.layer>0?O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):O(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?c.dNaN:this.layer>0?O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):O(this.sign,0,Math.log10(this.mag))}log(e){return e=m(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?c.dNaN:this.layer===0&&e.layer===0?O(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):c.div(this.log10(),e.log10())}log2(){return this.sign<=0?c.dNaN:this.layer===0?O(this.sign,0,Math.log2(this.mag)):this.layer===1?O(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?O(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?c.dNaN:this.layer===0?O(this.sign,0,Math.log(this.mag)):this.layer===1?O(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?O(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=m(e),n=this,s=t;if(n.sign===0)return s.eq(0)?E(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(s.sign===0)return E(1,0,1);if(s.sign===1&&s.layer===0&&s.mag===1)return n;const i=n.absLog10().mul(s).pow10();return this.sign===-1?Math.abs(s.toNumber()%2)%2===1?i.neg():Math.abs(s.toNumber()%2)%2===0?i:c.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return c.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return O(1,0,t);if(e.sign===0)return c.dOne;e=E(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?O(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?O(-e.sign,e.layer+1,-e.mag):c.dOne}pow_base(e){return m(e).pow(this)}root(e){const t=m(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?c.exp(c.mul(this,c.ln(this).sub(1))):c.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(E(1,0,24)))return c.fromNumber(_s(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let s=e,i=12*s,r=1/i,a=t+r;if(a===t||(t=a,s=s*n,i=360*s,r=1/i,a=t-r,a===t))return c.exp(t);t=a,s=s*n,i=1260*s;let l=1/i;return t=t+l,s=s*n,i=1680*s,l=1/i,t=t-l,c.exp(t)}else return this.layer===1?c.exp(c.mul(this,c.ln(this).sub(1))):c.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?c.dOne:this.layer===0&&this.mag<=709.7?c.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?O(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?O(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):O(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return c.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return O(1,2,Math.log10(this.mag)-.3010299956639812);{const e=c.div(E(this.sign,this.layer-1,this.mag),E(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=E(1,0,1)){if(e===1)return c.pow(this,t);if(e===0)return new c(t);if(this.eq(c.dOne))return c.dOne;if(this.eq(-1))return c.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return c.fromNumber(Math.E);const r=c.ln(this).neg();return r.lambertw().div(r)}else return i>1.444667861009766?c.fromNumber(Number.POSITIVE_INFINITY):c.dNaN}if(this.eq(c.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),c.fromNumber(i)}if(e<0)return c.iteratedlog(t,this,-e);t=m(t);const n=e;e=Math.trunc(e);const s=n-e;if(this.gt(c.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const r=t;if(t=this.pow(t),r.eq(t))return t}if(s!=0){const i=this.pow(t);return t.mul(1-s).add(i.mul(s))}return t}s!==0&&(t.eq(c.dOne)?this.gt(10)?t=this.pow(s):(t=c.fromNumber(c.tetrate_critical(this.toNumber(),s)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(s):t=t.layeradd(s,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return E(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=E(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return c.tetrate(e,-t,this);e=m(e);let n=c.fromDecimal(this);const s=t;t=Math.trunc(t);const i=s-t;if(n.layer-e.layer>3){const r=Math.min(t,n.layer-e.layer-3);t-=r,n.layer-=r}for(let r=0;r<t;++r){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(r>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10,t=100){let n=.001,s=!1,i=!1,r=this.slog_internal(e).toNumber();for(let a=1;a<t;++a){const u=new c(e).tetrate(r).gt(this);if(a>1&&i!=u&&(s=!0),i=u,s?n/=2:n*=2,n=Math.abs(n)*(u?-1:1),r+=n,n===0)break}return c.fromNumber(r)}slog_internal(e=10){if(e=m(e),e.lte(c.dZero)||e.eq(c.dOne))return c.dNaN;if(e.lt(c.dOne))return this.eq(c.dOne)?c.dZero:this.eq(c.dZero)?c.dNegOne:c.dNaN;if(this.mag<0||this.eq(c.dZero))return c.dNegOne;let t=0,n=c.fromDecimal(this);if(n.layer-e.layer>3){const s=n.layer-e.layer-3;t+=s,n.layer-=s}for(let s=0;s<100;++s)if(n.lt(c.dZero))n=c.pow(e,n),t-=1;else{if(n.lte(c.dOne))return c.fromNumber(t+c.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=c.log(n,e)}return c.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:c.critical_section(e,t,vs)}static tetrate_critical(e,t){return c.critical_section(e,t,ps)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let s=0,i=0;for(let a=0;a<Ie.length;++a)if(Ie[a]==e){s=n[a][Math.floor(t)],i=n[a][Math.ceil(t)];break}else if(Ie[a]<e&&Ie[a+1]>e){const l=(e-Ie[a])/(Ie[a+1]-Ie[a]);s=n[a][Math.floor(t)]*(1-l)+n[a+1][Math.floor(t)]*l,i=n[a][Math.ceil(t)]*(1-l)+n[a+1][Math.ceil(t)]*l;break}const r=t-Math.floor(t);return s<=0||i<=0?s*(1-r)+i*r:Math.pow(e,Math.log(s)/Math.log(e)*(1-r)+Math.log(i)/Math.log(e)*r)}layeradd10(e){e=c.fromValue_noAlloc(e).toNumber();const t=c.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let s=0;s<100;++s){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const s=this.slog(t).toNumber()+e;return s>=0?c.tetrate(t,s):Number.isFinite(s)?s>=-1?c.log(c.tetrate(t,s+1),t):c.log(c.log(c.tetrate(t,s+2),t),t):c.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return c.fromNumber(Ut(this.toNumber()));if(this.layer===0)return c.fromNumber(Ut(this.sign*this.mag));if(this.layer===1)return zt(this);if(this.layer===2)return zt(this);if(this.layer>=3)return E(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return E(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=E(1,0,1)){t=m(t);const n=e;e=Math.trunc(e);const s=n-e;s!==0&&(t.eq(c.dOne)?(++e,t=c.fromNumber(s)):this.eq(10)?t=t.layeradd10(s):t=t.layeradd(s,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?c.fromNumber(Math.sin(this.sign*this.mag)):E(0,0,0)}cos(){return this.mag<0?c.dOne:this.layer===0?c.fromNumber(Math.cos(this.sign*this.mag)):E(0,0,0)}tan(){return this.mag<0?this:this.layer===0?c.fromNumber(Math.tan(this.sign*this.mag)):E(0,0,0)}asin(){return this.mag<0?this:this.layer===0?c.fromNumber(Math.asin(this.sign*this.mag)):E(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?c.fromNumber(Math.acos(this.toNumber())):this.layer===0?c.fromNumber(Math.acos(this.sign*this.mag)):E(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?c.fromNumber(Math.atan(this.sign*this.mag)):c.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return c.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return c.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?E(Number.NaN,Number.NaN,Number.NaN):c.ln(this.add(1).div(c.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(c.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let g=c;g.fromStringCache=new os(hs);g.dZero=E(0,0,0);g.dOne=E(1,0,1);g.dNegOne=E(-1,0,1);g.dTwo=E(1,0,2);g.dTen=E(1,0,10);g.dNaN=E(Number.NaN,Number.NaN,Number.NaN);g.dInf=E(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);g.dNegInf=E(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);g.dNumberMax=O(1,0,Number.MAX_VALUE);g.dNumberMin=O(1,0,Number.MIN_VALUE);m=g.fromValue_noAlloc;O=g.fromComponents;E=g.fromComponents_noNormalize;g.fromMantissaExponent;g.fromMantissaExponent_noNormalize;const ys=new g(1);function We(e,t,n=!0){let s=g.log10(e).floor(),i=g.div(e,g.pow(10,s));i.toStringWithDecimalPlaces(t)==="10"&&(i=ys,s=s.add(1));const r=s.gte(1e9)?ce(s,Math.max(Math.max(t,3),A.defaultDecimalsShown)):s.gte(1e4)?ot(s,0):s.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+r:"e"+r}function ot(e,t){if(e==null)return"NaN";if(e=new g(e),e.mag<.001)return 0 .toFixed(t);const s=e.toStringWithDecimalPlaces(t).split(".");return s[0]=s[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),s.length==1?s[0]:s[0]+"."+s[1]}function Xt(e,t){return e==null?"NaN":(e=new g(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),A.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const bs=new g("eeee1000"),Ns=new g("e100000"),Gt=new g("e1000"),Qt=new g(1e9),ks=new g(1e6),ws=new g(1e3),Ss=new g(.98),Ms=new g(.001),en=new g(0);function ce(e,t,n){if(t==null&&(t=A.defaultDecimalsShown),n=n!=null?n:A.defaultShowSmall,e=new g(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+ce(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(bs)){const s=e.slog();return s.gte(ks)?"F"+ce(s.floor()):g.pow(10,s.sub(s.floor())).toStringWithDecimalPlaces(3)+"F"+ot(s.floor(),0)}else{if(e.gte(Ns))return We(e,0,!1);if(e.gte(Gt))return We(e,0);if(e.gte(Qt))return We(e,t);if(e.gte(ws))return ot(e,0);if(e.gte(Ms)||!n)return Xt(e,t);if(e.eq(en))return 0 .toFixed(t)}return e=nn(e),e.lt(Gt)?We(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):ce(e,t)+"\u207B\xB9"}function ue(e){return e=new g(e),e.sign<0?"-"+ue(e.neg()):e.gte(Qt)||e.lte(Ss)&&!e.eq(en)?ce(e):ce(e,0)}function tn(e){return g.lt(e,0)?"-"+tn(g.neg(e)):g.gt(e,2**51)?ce(g.div(e,31536e3))+"y":(e=new g(e).toNumber(),e<60?ce(e)+"s":e<3600?ue(Math.floor(e/60))+"m "+ce(e%60)+"s":e<86400?ue(Math.floor(e/3600))+"h "+ue(Math.floor(e/60)%60)+"m "+ue(e%60)+"s":e<31536e3?ue(Math.floor(e/84600)%365)+"d "+ue(Math.floor(e/3600)%24)+"h "+ue(Math.floor(e/60)%60)+"m":ue(Math.floor(e/31536e3))+"y "+ue(Math.floor(e/84600)%365)+"d "+ue(Math.floor(e/3600)%24)+"h")}function Cs(e,t,n){e=new g(e);let s=e.toStringWithDecimalPlaces(t);return new g(s).gte(n)&&(s=g.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),s}function $s(e,t){return ce(e,t,!0)}function nn(e){let t=g.log10(e).ceil();const n=g.div(e,g.pow(10,t));return t=t.neg(),e=new g(10).pow(t).times(n),e}var Ts=Object.freeze(Object.defineProperty({__proto__:null,default:g,exponentialFormat:We,commaFormat:ot,regularFormat:Xt,format:ce,formatWhole:ue,formatTime:tn,toPlaces:Cs,formatSmall:$s,invertOOM:nn},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Is,commaFormat:Ps,regularFormat:xs,format:_e,formatWhole:Ge,formatTime:gt,toPlaces:Os,formatSmall:Fs,invertOOM:Es}=Ts;window.Decimal=g;window.exponentialFormat=Is;window.commaFormat=Ps;window.regularFormat=xs;window.format=_e;window.formatWhole=Ge;window.formatTime=gt;window.toPlaces=Os;window.formatSmall=Fs;window.invertOOM=Es;function Ds(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function kt(e){return typeof e=="function"}var G=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(G||{});const Ke=Symbol("DoNotCache");function P(e,t){const n=e[t];kt(n)&&n.length===0&&!n[Ke]?e[t]=x(n.bind(e)):kt(n)&&(e[t]=n.bind(e),e[t][Ke]=!0)}function wt(e){return kt(e)&&!e[Ke]&&(e=x(e)),e}const Se=Symbol("Component"),Me=Symbol("GatherProps");let Vs=0;function pt(e="feature-"){return e+Vs++}var He=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(He||{});function sn(e){const t=o(e);return t!==2&&t!==!1}function rn(e){return o(e)===1}function W(e){return e[Ke]=!0,e}function te(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function an(e,...t){const n=[],s=i=>{Object.keys(i).forEach(r=>{const a=i[r];a!=null&&typeof a=="object"&&(t.includes(a.type)?n.push(a):!(a instanceof g)&&!K(a)&&s(a))})};return s(e),n}const Pe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var $t=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))($t||{}),Tt={classic:Pe,paper:{...Pe,variables:{...Pe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Pe,variables:{...Pe.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Pe,variables:{...Pe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const ee=Yt();"fonts"in document&&(document.fonts.onloadingdone=()=>ee.emit("fontsLoaded"));var Rs=Object.freeze(Object.defineProperty({__proto__:null,globalBus:ee},Symbol.toStringTag,{value:"Module"}));const Ls=Je({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var I=window.player=Ls;function on(e){return JSON.stringify(e,(t,n)=>o(n))}function ln(e={}){return Object.assign({id:`${A.id}-0`,name:"Default Save",tabs:A.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:A.id,modVersion:A.versionNumber,layers:{}},e)}function oe(e){const t=Ne.compressToUTF16(on(e!=null?e:I));return localStorage.setItem((e!=null?e:I).id,t),t}async function As(){Bs();try{let e=localStorage.getItem(Y.active);if(e==null){await Oe(qe());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ne.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==A.id){await Oe(qe());return}t.id=Y.active,await Oe(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Oe(qe())}}function qe(){const e=st(),t=ln({id:e});return oe(t),Y.saves.push(e),t}function st(){let e,t=0;do e=`${A.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const It=C(!1);async function Oe(e){console.info("Loading save",e),It.value=!0;const{layers:t,removeLayer:n,addLayer:s}=await at(()=>Promise.resolve().then(function(){return oi}),void 0),{fixOldSave:i,getInitialLayers:r}=await at(()=>Promise.resolve().then(function(){return co}),void 0);for(const a in t){const l=t[a];l&&n(l)}r(e).forEach(a=>s(a,e)),e=ln(e),e.offlineProd&&e.time!=null&&e.time&&e.devSpeed!==0&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=Math.min(e.offlineTime+(Date.now()-e.time)/1e3,A.offlineLimit*3600)),e.time=Date.now(),e.modVersion!==A.versionNumber&&(i(e.modVersion,e),e.modVersion=A.versionNumber),Object.assign(I,e),Y.active=I.id,ee.emit("onLoad")}setInterval(()=>{I.autosave&&oe()},1e3);window.onbeforeunload=()=>{I.autosave&&oe()};window.save=oe;const qs=window.hardReset=async()=>{await Oe(qe())};window.deleteLowerSaves=()=>{const e=Object.values(Y.saves).indexOf(I.id)+1;Object.values(Y.saves).slice(e).forEach(t=>localStorage.removeItem(t)),Y.saves=Y.saves.slice(0,e)};const Ye=Je({active:"",saves:[],showTPS:!0,theme:$t.Nordic,unthrottled:!1,alignUnits:!1});ge(Ye,e=>{const t=Ne.compressToUTF16(JSON.stringify(e));localStorage.setItem(A.id,t)},{deep:!0});var Y=window.settings=Ye;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:$t.Nordic,alignUnits:!1};ee.emit("loadSettings",e),Object.assign(Ye,e),qs()};function Bs(){try{let e=localStorage.getItem(A.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ne.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(Ye,t)}ee.emit("loadSettings",Ye)}catch{}}const Us=Je([]),un=Je([]);function zs(e){un.push(e)}const Gs=Je([]);function re(e,t="span"){return typeof e=="function"?V({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),V({template:e})):V({render:()=>({})}):e}function Xe(e){if(vt(e))return typeof e=="function"?e():re(e);const t=e[Se];return p(t,e[Me](),null)}function it(e){if(vt(e))return typeof e=="function"?e():typeof e=="string"?p(X,null,[e]):p(e,null,null);const t=e[Se];return p(t,e[Me](),null)}function vt(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[Ke]===!0}function cn(e,t){const n=C(null),s=C(void 0);function i(l){n.value||(n.value=setInterval(a,250)),s.value=l}function r(){n.value&&(clearInterval(n.value),n.value=null)}function a(){t&&t.value?t.value():e&&e.value&&e.value(s.value)}return Zt(r),{start:i,stop:r,handleHolding:a}}function Hs(e,t="div"){const n=me();return ke(()=>{n.value=re(he(e),t)}),n}function je(e,t="div"){const n=me(null);return ke(()=>{const s=he(e);n.value=s==""||s==null?null:re(s,t)}),n}function he(e){return o(o(e))}function L(...e){return e.includes(Object)||e.push(Object),e}var B=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};const js=V({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var v;const n=C({}),s=new ResizeObserver(l),i=C(null);mt(()=>{const _=i.value;_!=null&&s.observe(_)});let r=!0,a=C((v=i.value)==null?void 0:v.getBoundingClientRect());function l(){r&&(r=!1,Ee(()=>{var _;a.value=(_=i.value)==null?void 0:_.getBoundingClientRect(),Object.values(n.value).filter(y=>y).forEach(y=>y.rect=y.element.getBoundingClientRect()),t("updateNodes",n.value),r=!0}))}ee.on("fontsLoaded",l);const u={attributes:!1,childList:!0,subtree:!1};tt(Pt,(_,y)=>{const k=new MutationObserver(()=>d(_));k.observe(y,u),n.value[_]={element:y,observer:k,rect:y.getBoundingClientRect()},l()}),tt(xt,_=>{var y;(y=n.value[_])==null||y.observer.disconnect(),n.value[_]=void 0,l()}),tt(Ot,n),tt(Ft,a);function d(_){const y=n.value[_];y!=null&&(y.rect=y.element.getBoundingClientRect(),t("updateNodes",n.value))}return(_,y)=>(h(),N(X,null,[we(_.$slots,"default",{},void 0,!0),f("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var dn=B(js,[["__scopeId","data-v-2b1dc1bc"]]);const Ws=["onPointerdown"],Zs={class:"modal-wrapper"},Ks={class:"modal-container"},Ys={class:"modal-header"},Js=T(" default header "),Xs={class:"modal-body"},Qs=T(" default body "),ei={class:"modal-footer"},ti=f("div",{class:"modal-default-flex-grow"},null,-1),Re=V({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=ae(e),r=x(()=>o(i.modelValue)||l.value);function a(){n("update:modelValue",!1)}const l=C(!1),u=C(null),d=x(()=>{var v,_;return(_=(v=u.value)==null?void 0:v.nodes)!=null?_:null});return t({isOpen:r,nodes:d}),(v,_)=>(h(),D(Mn,{to:"#modal-root"},[p(Ct,{name:"modal",onBeforeEnter:_[0]||(_[0]=y=>l.value=!0),onAfterLeave:_[1]||(_[1]=y=>l.value=!1)},{default:F(()=>[Mt(f("div",De({class:"modal-mask",onPointerdown:Ze(a,["self"])},v.$attrs),[f("div",Zs,[f("div",Ks,[f("div",Ys,[we(v.$slots,"header",{shown:o(r)},()=>[Js])]),f("div",Xs,[p(dn,{ref_key:"contextRef",ref:u},{default:F(()=>[we(v.$slots,"body",{shown:o(r)},()=>[Qs])]),_:3},512)]),f("div",ei,[we(v.$slots,"footer",{shown:o(r)},()=>[f("div",{class:"modal-default-footer"},[ti,f("button",{class:"button modal-default-button",onClick:a}," Close ")])])])])])],16,Ws),[[Sn,e.modelValue]])]),_:3})]))}}),xe=Symbol("ProxyState");function Le(e,t={}){const n=t;let s=!1;function i(){return s||(Object.assign(n,e(n)),s=!0),n}return new Proxy(n,{get(r,a){if(a===xe)return i();const l=i()[a];return l!=null&&typeof l=="object"&&ut in l?l[ut]:l},set(r,a,l){return i()[a]=l,!0},has(r,a){return a===xe?!0:Reflect.has(i(),a)},ownKeys(){return Reflect.ownKeys(i())},getOwnPropertyDescriptor(r,a){return s||(Object.assign(n,e(n)),s=!0),Object.getOwnPropertyDescriptor(r,a)}})}var Z=window.state=ht({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const Be=Symbol("PersistentState"),Ve=Symbol("DefaultValue"),lt=Symbol("StackTrace"),St=Symbol("Deleted"),ut=Symbol("NonPersistent"),Fe=Symbol("SaveDataPath");function ni(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function Ht(e,t){var n;if(g.isNaN(t))throw Z.hasNaN||(I.autosave=!1,Z.hasNaN=!0,Z.NaNPath=e[Fe],Z.NaNPersistent=e),console.error("Attempted to save NaN value to",(n=e[Fe])==null?void 0:n.join("."),e),"Attempted to set NaN value. See above for details";e[Be].value=t}function Qe(e,t=!0){const n=K(e)?e:C(e);K(e)&&(e=e.value);const s=x({get(){return n.value},set(r){t?Ht(i,r):i[Be].value=r}});s[Ve]=e;const i={get value(){return n.value},set value(r){t?Ht(i,r):i[Be].value=r},__v_isRef:!0,[Be]:n,[Ve]:e,[lt]:ni(),[St]:!1,[ut]:s,[Fe]:void 0};return fe.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",i,`
Created at:
`+i[lt]):Ue[fe[fe.length-1]].add(i),i}function si(e){return e!=null&&typeof e=="object"&&Be in e}ee.on("addLayer",(e,t)=>{const n=[],s=(i,r=[])=>{let a=!1;return Object.keys(i).forEach(l=>{let u=i[l];if(u!=null&&typeof u=="object")if(xe in u&&(u=u[xe]),si(u)){if(a=!0,u[St]){console.warn("Deleted persistent ref present in returned object. Ignoring...",u,`
Created at:
`+u[lt]);return}Ue[e.id].delete(u);const d=[e.id,...r,l];u[Fe]!=null&&JSON.stringify(d)!==JSON.stringify(u[Fe])&&console.error(`Persistent ref is being saved to \`${d.join(".")}\` when it's already present at \`${u[Fe].join(".")}\`. This can cause unexpected behavior when loading saves between updates.`,u),u[Fe]=d;const v=r.reduce((y,k)=>(k in y||(y[k]={}),y[k]),t),_=v[l];v[l]=u[Be],Cn(v)?_!=null?v[l]=_:v[l]=u[Ve]:_!=null?v[l].value=_:v[l].value=u[Ve]}else!(u instanceof g)&&!K(u)&&!n.includes(u)&&(typeof u.type=="symbol"&&n.push(u),s(u,[...r,l])&&(Lt(u)&&!Lt(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",xe in i?i[xe]:i,l):a=!0))}),a};s(e[xe]),Ue[e.id].forEach(i=>{i[St]||console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,i,`
Created at:
`+i[lt])}),Ue[e.id].clear()});const Pt=Symbol("RegisterNode"),xt=Symbol("UnregisterNode"),Ot=Symbol("Nodes"),Ft=Symbol("Bounds"),ie=ht({});window.layers=ie;const Ue={},fe=[];function Et(e,t){return Le(()=>{const n={},s=n.emitter=Yt();if(n.on=s.on.bind(s),n.emit=s.emit.bind(s),n.nodes=C({}),n.id=e,fe.push(e),Ue[e]=new Set,n.minimized=Qe(!1,!1),Object.assign(n,t.call(n)),fe[fe.length-1]==null||fe[fe.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${fe}
Trying to pop ${n.id}`;fe.pop(),P(n,"color"),P(n,"display"),P(n,"classes"),P(n,"style"),P(n,"name"),te(n,"name",n.id),P(n,"minWidth"),te(n,"minWidth",600),P(n,"minimizable"),te(n,"minimizable",!0),P(n,"minimizedDisplay");const i=n.style;return n.style=x(()=>{var a,l;let r=o(n.minWidth);return(typeof r=="number"||!Number.isNaN(parseInt(r)))&&(r=r+"px"),[(a=o(i))!=null?a:"",(l=n.minimized)!=null&&l.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:r,flexBasis:r,margin:""}]}),n})}function fn(e,t){if(console.info("Adding layer",e.id),ie[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,ie[e.id]);return}te(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),ie[e.id]=e,ee.emit("addLayer",e,t.layers[e.id])}function ii(e){return ie[e]}function mn(e){console.info("Removing layer",e.id),ee.emit("removeLayer",e),ie[e.id]=void 0}function ri(e){mn(e),fn(e,I)}function ai(e){const t=C(!1);return{openModal:()=>t.value=!0,modal:W(()=>p(Re,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>p("h2",null,[o(e.name)]),body:o(e.display)}))}}ee.on("update",function(t){Object.values(ie).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(ie).forEach(n=>{n==null||n.emit("update",t)}),Object.values(ie).forEach(n=>{n==null||n.emit("postUpdate",t)})});var oi=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Pt,UnregisterNodeInjectionKey:xt,NodesInjectionKey:Ot,BoundsInjectionKey:Ft,layers:ie,persistentRefs:Ue,addingLayers:fe,createLayer:Et,addLayer:fn,getLayer:ii,removeLayer:mn,reloadLayer:ri,setupLayerModal:ai},Symbol.toStringTag,{value:"Module"}));const li=V({components:{Context:dn},props:{index:{type:Number,required:!0},display:{type:L(Object,String,Function),required:!0},minimizedDisplay:L(Object,String,Function),minimized:{type:Object,required:!0},name:{type:L(String),required:!0},color:L(String),minimizable:L(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:s,minimizedDisplay:i}=ae(e),r=Hs(t),a=je(i),l=x(()=>A.allowGoBack&&n.value>0&&!he(s));function u(){I.tabs.splice(o(e.index),1/0)}function d(v){e.nodes.value=v}return{component:r,minimizedComponent:a,showGoBack:l,updateNodes:d,unref:o,goBack:u}}}),ui={key:1};function ci(e,t,n,s,i,r){const a=ze("Context");return h(),N("div",{class:"layer-container",style:de({"--layer-color":e.unref(e.color)})},[e.showGoBack?(h(),N("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...l)=>e.goBack&&e.goBack(...l))},"\u274C")):$("",!0),e.unref(e.minimized)?(h(),N("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=l=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(h(),D(Q(e.minimizedComponent),{key:0})):(h(),N("div",ui,R(e.unref(e.name)),1))])):(h(),N("div",{key:2,class:ne(["layer-tab",{showGoBack:e.showGoBack}])},[p(a,{onUpdateNodes:e.updateNodes},{default:F(()=>[(h(),D(Q(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(h(),N("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=l=>e.$emit("setMinimized",!0))}," \u25BC ")):$("",!0)],4)}var di=B(li,[["render",ci],["__scopeId","data-v-a592996e"]]);const hn=e=>($e("data-v-4b4bda40"),e=e(),Te(),e),fi=hn(()=>f("h2",null,"Changelog",-1)),mi=hn(()=>f("details",{open:""},[f("summary",null,[T("v0.0 Initial Commit - "),f("time",null,"2021-09-04")]),T(" This is the first release :D "),f("ul",null,[f("li",{class:"feature"},"Did everything"),f("li",{class:"fix"},"Had some fun"),f("li",{class:"breaking"},"Removed everything"),f("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),hi=V({__name:"Changelog",setup(e,{expose:t}){const n=C(!1);return t({open(){n.value=!0}}),(s,i)=>(h(),D(Re,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=r=>n.value=r)},{header:F(()=>[fi]),body:F(()=>[mi]),_:1},8,["modelValue"]))}});var gi=B(hi,[["__scopeId","data-v-4b4bda40"]]),pi=V({props:{element:Object,display:{type:L(Object,String,Function),required:!0},style:L(Object,String,Array),classes:L(Object),direction:L(String),xoffset:L(String),yoffset:L(String),pinned:Object},setup(e){const{element:t,display:n,pinned:s}=ae(e),i=C(!1),r=x(()=>(he(s)||i.value)&&a.value),a=je(n),l=me(re(W(()=>{const v=he(t);return v==null?"":it(v)})));function u(v){const _=s;v.shiftKey&&_&&(_.value=!_.value,v.stopPropagation(),v.preventDefault())}const d=x(()=>he(s)&&Tt[Y.theme].showPin);return{Direction:G,isHovered:i,isShown:r,comp:a,elementComp:l,unref:o,togglePinned:u,showPin:d}}});const vi={key:0,class:"material-icons pinned"};function _i(e,t,n,s,i,r){return h(),N("div",{class:ne(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=a=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=a=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...a)=>e.togglePinned&&e.togglePinned(...a))},[we(e.$slots,"default",{},void 0,!0),e.elementComp?(h(),D(Q(e.elementComp),{key:0})):$("",!0),p(Ct,{name:"fade"},{default:F(()=>{var a;return[e.isShown?(h(),N("div",{key:0,class:ne(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:de([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(a=e.unref(e.style))!=null?a:{}])},[e.showPin?(h(),N("span",vi,"push_pin")):$("",!0),e.comp?(h(),D(Q(e.comp),{key:1})):$("",!0)],6)):$("",!0)]}),_:1})],34)}var j=B(pi,[["render",_i],["__scopeId","data-v-6102fa3a"]]);const Ae=e=>($e("data-v-5d3cb6f4"),e=e(),Te(),e),yi={class:"info-modal-header"},bi=["src","alt"],Ni={class:"info-modal-title"},ki={key:0},wi={key:0},Si={key:0},Mi=Ae(()=>f("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Ci=Ae(()=>f("br",null,null,-1)),$i=Ae(()=>f("br",null,null,-1)),Ti=["href"],Ii=Ae(()=>f("span",{class:"material-icons info-modal-discord"},"discord",-1)),Pi=Ae(()=>f("div",null,[f("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link",target:"_blank"},[f("span",{class:"material-icons info-modal-discord"},"discord"),T(" The Paper Pilot Community ")])],-1)),xi=Ae(()=>f("div",null,[f("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[f("span",{class:"material-icons info-modal-discord"},"discord"),T(" The Modding Tree ")])],-1)),Oi=Ae(()=>f("br",null,null,-1));var Fi=V({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:s,logo:i,author:r,discordName:a,discordLink:l,versionNumber:u,versionTitle:d}=A,v=ae(n),_=C(!1),y=x(()=>gt(I.timePlayed)),k=x(()=>re(W(()=>p(X,null,[un.map(Xe)]))));t({open(){_.value=!0}});function w(){var S;(S=o(v.changelog))==null||S.open()}return(S,U)=>(h(),D(Re,{modelValue:_.value,"onUpdate:modelValue":U[0]||(U[0]=H=>_.value=H)},{header:F(()=>[f("div",yi,[o(i)?(h(),N("img",{key:0,class:"info-modal-logo",src:o(i),alt:o(s)},null,8,bi)):$("",!0),f("div",Ni,[f("h2",null,R(o(s)),1),f("h4",null,[T(" v"+R(o(u)),1),o(d)?(h(),N("span",ki,": "+R(o(d)),1)):$("",!0)])])])]),body:F(({shown:H})=>[H?(h(),N("div",wi,[o(r)?(h(),N("div",Si,"By "+R(o(r)),1)):$("",!0),Mi,Ci,f("div",{class:"link",onClick:w},"Changelog"),$i,f("div",null,[o(l)?(h(),N("a",{key:0,href:o(l),class:"info-modal-discord-link",target:"_blank"},[Ii,T(" "+R(o(a)),1)],8,Ti)):$("",!0)]),Pi,xi,Oi,f("div",null,"Time Played: "+R(o(y)),1),(h(),D(Q(o(k))))])):$("",!0)]),_:1},8,["modelValue"]))}});var Ei=B(Fi,[["__scopeId","data-v-5d3cb6f4"]]);const Di={class:"field"},Vi={key:0,class:"field-title"},gn=V({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var a;const n=e,s=je(Ce(n,"title"),"span"),i=C((a=n.options.find(l=>l.value===n.modelValue))!=null?a:null);ge(Ce(n,"modelValue"),l=>{var u;he(i)!==l&&(i.value=(u=n.options.find(d=>d.value===l))!=null?u:null)});function r(l){t("update:modelValue",l.value)}return(l,u)=>(h(),N("div",Di,[o(s)?(h(),N("span",Vi,[(h(),D(Q(o(s))))])):$("",!0),p(o(xn),{options:e.options,modelValue:i.value,"onUpdate:modelValue":[u[0]||(u[0]=d=>i.value=d),r],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Ri={class:"field"},Li=V({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=x(()=>{var r;return re((r=o(n.title))!=null?r:"<span></span>","span")}),i=x({get(){return!!n.modelValue},set(r){t("update:modelValue",r)}});return(r,a)=>(h(),N("label",Ri,[Mt(f("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":a[0]||(a[0]=l=>K(i)?i.value=l:null)},null,512),[[$n,o(i)]]),(h(),D(Q(o(s))))]))}});var ve=B(Li,[["__scopeId","data-v-11046116"]]);const Ai=["onClick"],qi=V({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=C(!1),s=C(null);function i(){t("click"),s.value&&clearTimeout(s.value),n.value=!1,Ee(()=>{n.value=!0,s.value=setTimeout(()=>n.value=!1,500)})}return(r,a)=>(h(),N("button",{onClick:Ze(i,["stop"]),class:ne(["feedback",{activated:n.value,left:e.left}])},[we(r.$slots,"default",{},void 0,!0)],10,Ai))}});var pn=B(qi,[["__scopeId","data-v-01a1b95c"]]);const Bi={class:"header"},Ui=f("h2",null,"Settings",-1),zi={class:"option-tabs"},Gi={key:0},Hi=T("Manually save"),ji={key:1};var Wi=V({__name:"Options",setup(e,{expose:t}){const n=C(!1),s=C("behaviour");function i(se){return se==s.value}function r(se){s.value=se}t({isTab:i,setTab:r,save:oe,open(){n.value=!0}});const a=Object.keys(Tt).map(se=>({label:Ds(se),value:se})),l=x(()=>re(W(()=>p(X,null,[Us.map(Xe)])))),{showTPS:u,theme:d,unthrottled:v,alignUnits:_}=ae(Y),{autosave:y,offlineProd:k}=ae(I),w=x({get(){return I.devSpeed===0},set(se){I.devSpeed=se?0:null}}),S=W(()=>p("span",{class:"option-title"},[T("Unthrottled"),p("desc",null,[T("Allow the game to run as fast as possible. Not battery friendly.")])])),U=W(()=>p("span",{class:"option-title"},[T("Offline Production"),p(j,{display:"Save-specific",direction:G.Right},{default:()=>[T("*")]}),p("desc",null,[T("Simulate production that occurs while the game is closed.")])])),H=W(()=>p("span",{class:"option-title"},[T("Autosave"),p(j,{display:"Save-specific",direction:G.Right},{default:()=>[T("*")]}),p("desc",null,[T("Automatically save the game every second or when the game is closed.")])])),b=W(()=>p("span",{class:"option-title"},[T("Pause game"),p(j,{display:"Save-specific",direction:G.Right},{default:()=>[T("*")]}),p("desc",null,[T("Stop everything from moving.")])])),M=W(()=>p("span",{class:"option-title"},[T("Theme"),p("desc",null,[T("How the game looks.")])])),q=W(()=>p("span",{class:"option-title"},[T("Show TPS"),p("desc",null,[T("Show TPS meter at the bottom-left corner of the page.")])])),pe=W(()=>p("span",{class:"option-title"},[T("Align modifier units"),p("desc",null,[T("Align numbers to the beginning of the unit in modifier view.")])]));return(se,z)=>(h(),D(Re,{modelValue:n.value,"onUpdate:modelValue":z[10]||(z[10]=J=>n.value=J)},{header:F(()=>[f("div",Bi,[Ui,f("div",zi,[f("button",{class:ne({selected:i("behaviour")}),onClick:z[0]||(z[0]=J=>r("behaviour"))},"Behaviour",2),f("button",{class:ne({selected:i("appearance")}),onClick:z[1]||(z[1]=J=>r("appearance"))},"Appearance",2)])])]),body:F(()=>[i("behaviour")?(h(),N("div",Gi,[p(ve,{title:o(S),modelValue:o(v),"onUpdate:modelValue":z[2]||(z[2]=J=>K(v)?v.value=J:null)},null,8,["title","modelValue"]),o(A).enablePausing?(h(),D(ve,{key:0,title:o(b),modelValue:o(w),"onUpdate:modelValue":z[3]||(z[3]=J=>K(w)?w.value=J:null)},null,8,["title","modelValue"])):$("",!0),p(ve,{title:o(U),modelValue:o(k),"onUpdate:modelValue":z[4]||(z[4]=J=>K(k)?k.value=J:null)},null,8,["title","modelValue"]),p(ve,{title:o(H),modelValue:o(y),"onUpdate:modelValue":z[5]||(z[5]=J=>K(y)?y.value=J:null)},null,8,["title","modelValue"]),o(y)?$("",!0):(h(),D(pn,{key:1,class:"button save-button",onClick:z[6]||(z[6]=J=>o(oe)())},{default:F(()=>[Hi]),_:1}))])):$("",!0),i("appearance")?(h(),N("div",ji,[p(gn,{title:o(M),options:o(a),modelValue:o(d),"onUpdate:modelValue":z[7]||(z[7]=J=>K(d)?d.value=J:null)},null,8,["title","options","modelValue"]),(h(),D(Q(o(l)))),p(ve,{title:o(q),modelValue:o(u),"onUpdate:modelValue":z[8]||(z[8]=J=>K(u)?u.value=J:null)},null,8,["title","modelValue"]),p(ve,{title:o(pe),modelValue:o(_),"onUpdate:modelValue":z[9]||(z[9]=J=>K(_)?_.value=J:null)},null,8,["title","modelValue"])])):$("",!0)]),_:1},8,["modelValue"]))}});const Zi=["onSubmit"],Ki={class:"field"},Yi={key:0,class:"field-title"},Ji=["placeholder"],Xi=V({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,s=je(Ce(n,"title"),"span"),i=me(null);mt(()=>{var u;(u=i.value)==null||u.focus()});const r=x({get(){var u;return(u=o(n.modelValue))!=null?u:""},set(u){t("update:modelValue",u)}});function a(){t("submit")}function l(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(u,d)=>(h(),N("form",{onSubmit:Ze(a,["prevent"])},[f("div",Ki,[o(s)?(h(),N("span",Yi,[(h(),D(Q(o(s))))])):$("",!0),e.textArea?(h(),D(o(Fn),{key:1,modelValue:o(r),"onUpdate:modelValue":d[0]||(d[0]=v=>K(r)?r.value=v:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:l,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):Mt((h(),N("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=v=>K(r)?r.value=v:null),placeholder:e.placeholder,class:ne({fullWidth:!e.title}),onBlur:l,ref_key:"field",ref:i},null,42,Ji)),[[Tn,o(r)]])])],40,Zi))}});var vn=B(Xi,[["__scopeId","data-v-90bd4994"]]);const Qi={key:0},er=["onClick","disabled"],tr={key:0},nr=["onClick"],sr=V({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const s=ae(e),i=C(!1);ge(i,l=>{t("confirmingChanged",l)});function r(){if(o(s.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function a(){i.value=!1}return(l,u)=>(h(),N("span",{class:ne(["container",{confirming:i.value}])},[i.value?(h(),N("span",Qi,"Are you sure?")):$("",!0),f("button",{onClick:Ze(r,["stop"]),class:"button danger",disabled:e.disabled},[i.value?(h(),N("span",tr,"Yes")):we(l.$slots,"default",{key:1},void 0,!0)],8,er),i.value?(h(),N("button",{key:1,class:"button",onClick:Ze(a,["stop"])},"No",8,nr)):$("",!0)],2))}});var ir=B(sr,[["__scopeId","data-v-2f8ef34c"]]);const ye=e=>($e("data-v-c3447434"),e=e(),Te(),e),rr=ye(()=>f("div",{class:"handle material-icons"},"drag_handle",-1)),ar={key:0,class:"actions"},or=ye(()=>f("span",{class:"material-icons"},"content_paste",-1)),lr=ye(()=>f("span",{class:"material-icons"},"content_copy",-1)),ur=ye(()=>f("span",{class:"material-icons"},"edit",-1)),cr=ye(()=>f("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),dr={key:1,class:"actions"},fr=ye(()=>f("span",{class:"material-icons"},"check",-1)),mr=ye(()=>f("span",{class:"material-icons"},"close",-1)),hr={key:2,class:"details"},gr={class:"save-version"},pr=ye(()=>f("br",null,null,-1)),vr={key:0},_r={key:3,class:"details"},yr={key:4,class:"details error"},br=ye(()=>f("br",null,null,-1)),Nr=V({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:s}=ae(n),i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=C(!1),a=C(!1),l=C("");ge(r,()=>{var _;return l.value=(_=s.value.name)!=null?_:""});const u=x(()=>s.value!=null&&s.value.id===I.id),d=x(()=>{var _;return u.value?I.time:(_=s.value!=null&&s.value.time)!=null?_:0});function v(){t("editName",l.value),r.value=!1}return(_,y)=>(h(),N("div",{class:ne(["save",{active:o(u)}])},[rr,r.value?(h(),N("div",dr,[f("button",{onClick:v,class:"button"},[p(j,{display:"Save",direction:o(G).Left,class:"info"},{default:F(()=>[fr]),_:1},8,["direction"])]),f("button",{onClick:y[5]||(y[5]=k=>r.value=!r.value),class:"button"},[p(j,{display:"Cancel",direction:o(G).Left,class:"info"},{default:F(()=>[mr]),_:1},8,["direction"])])])):(h(),N("div",ar,[o(s).error==null&&!a.value?(h(),D(pn,{key:0,onClick:y[0]||(y[0]=k=>t("export")),class:"button",left:""},{default:F(()=>[p(j,{display:"Export",direction:o(G).Left,class:"info"},{default:F(()=>[or]),_:1},8,["direction"])]),_:1})):$("",!0),o(s).error==null&&!a.value?(h(),N("button",{key:1,onClick:y[1]||(y[1]=k=>t("duplicate")),class:"button"},[p(j,{display:"Duplicate",direction:o(G).Left,class:"info"},{default:F(()=>[lr]),_:1},8,["direction"])])):$("",!0),o(s).error==null&&!a.value?(h(),N("button",{key:2,onClick:y[2]||(y[2]=k=>r.value=!r.value),class:"button"},[p(j,{display:"Edit Name",direction:o(G).Left,class:"info"},{default:F(()=>[ur]),_:1},8,["direction"])])):$("",!0),p(ir,{disabled:o(u),onClick:y[3]||(y[3]=k=>t("delete")),onConfirmingChanged:y[4]||(y[4]=k=>a.value=k)},{default:F(()=>[p(j,{display:"Delete",direction:o(G).Left,class:"info"},{default:F(()=>[cr]),_:1},8,["direction"])]),_:1},8,["disabled"])])),o(s).error==null&&!r.value?(h(),N("div",hr,[f("button",{class:"button open",onClick:y[6]||(y[6]=k=>t("open"))},[f("h3",null,R(o(s).name),1)]),f("span",gr,"v"+R(o(s).modVersion),1),pr,o(d)?(h(),N("div",vr,"Last played "+R(o(i).format(o(d))),1)):$("",!0)])):o(s).error==null&&r.value?(h(),N("div",_r,[p(vn,{modelValue:l.value,"onUpdate:modelValue":y[7]||(y[7]=k=>l.value=k),class:"editname",onSubmit:v},null,8,["modelValue"])])):(h(),N("div",yr,[T(" Error: Failed to load save with id "+R(o(s).id),1),br,T(R(o(s).error),1)]))],2))}});var kr=B(Nr,[["__scopeId","data-v-c3447434"]]);const Dt=e=>($e("data-v-5b5b1604"),e=e(),Te(),e),wr=Dt(()=>f("h2",null,"Saves Manager",-1)),Sr={class:"modal-footer"},Mr={class:"field"},Cr=Dt(()=>f("span",{class:"field-title"},"Create Save",-1)),$r={class:"field-buttons"},Tr={class:"footer"},Ir=Dt(()=>f("div",{style:{"flex-grow":"1"}},null,-1)),Pr=V({__name:"SavesManager",setup(e,{expose:t}){const n=C(!1),s=C(null);t({open(){n.value=!0}});const i=C(!1),r=C(""),a=C(null);ge(r,b=>{b?Ee(()=>{try{if(b[0]!=="{")if(b[0]==="e")b=decodeURIComponent(escape(atob(b)));else if(b[0]==="\u1BE1")b=Ne.decompressFromUTF16(b);else{console.warn("Unable to determine preset encoding",b),i.value=!0;return}const M=JSON.parse(b);if(typeof M!="object"){i.value=!0;return}const q=st();M.id=q,oe(M),r.value="",i.value=!1,Y.saves.push(q)}catch{i.value=!0}}):i.value=!1});let l={},u=C(Object.keys(l).reduce((b,M)=>(b.push({label:M.split("/").slice(-1)[0].slice(0,-4),value:l[M]}),b),[]));const d=ht({});function v(b){if(d[b]==null){let M=localStorage.getItem(b);if(M==null)d[b]={error:"Save doesn't exist in localStorage",id:b};else if(M==="dW5kZWZpbmVk")d[b]={error:"Save is undefined",id:b};else try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Ne.decompressFromUTF16(M);else return console.warn("Unable to determine preset encoding",M),i.value=!0,d[b]={error:"Unable to determine preset encoding",id:b},d[b];d[b]={...JSON.parse(M),id:b}}catch(q){d[b]={error:q,id:b},console.warn(`SavesManager: Failed to load info about save with id ${b}:
${q}
${M}`)}}return d[b]}ge(n,b=>{b&&Object.keys(d).forEach(M=>delete d[M])});const _=x(()=>Y.saves.reduce((b,M)=>(b[M]=v(M),b),{}));function y(b){let M;switch(I.id===b?M=on(I):M=JSON.stringify(_.value[b]),A.exportEncoding){default:console.warn(`Unknown save encoding: ${A.exportEncoding}. Defaulting to lz`);case"lz":M=Ne.compressToUTF16(M);break;case"base64":M=btoa(unescape(encodeURIComponent(M)));break;case"plain":break}const q=document.createElement("textarea");q.value=M,document.body.appendChild(q),q.select(),q.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(q)}function k(b){I.id===b&&oe();const M={..._.value[b],id:st()};oe(M),Y.saves.push(M.id)}function w(b){Y.saves=Y.saves.filter(M=>M!==b),localStorage.removeItem(b),d[b]=void 0}function S(b){_.value[I.id].time=I.time,oe(),d[I.id]=void 0,Oe(_.value[b]),d[b]=void 0}function U(b){if(a.value=b,Ee(()=>{a.value=null}),b[0]!=="{")if(b[0]==="e")b=decodeURIComponent(escape(atob(b)));else if(b[0]==="\u1BE1")b=Ne.decompressFromUTF16(b);else{console.warn("Unable to determine preset encoding",b);return}const M=JSON.parse(b);M.id=st(),oe(M),Y.saves.push(M.id),S(M.id)}function H(b,M){const q=_.value[b];q!=null&&(q.name=M,I.id===b?(I.name=M,oe()):(oe(q),d[b]=void 0))}return(b,M)=>(h(),D(Re,{modelValue:n.value,"onUpdate:modelValue":M[4]||(M[4]=q=>n.value=q),ref_key:"modal",ref:s},{header:F(()=>[wr]),body:F(({shown:q})=>[q?(h(),D(o(On),{key:0,list:o(Y).saves,handle:".handle",itemKey:pe=>pe},{item:F(({element:pe})=>[p(kr,{save:o(_)[pe],onOpen:se=>S(pe),onExport:se=>y(pe),onEditName:se=>H(pe,se),onDuplicate:se=>k(pe),onDelete:se=>w(pe)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):$("",!0)]),footer:F(()=>[f("div",Sr,[p(vn,{modelValue:r.value,"onUpdate:modelValue":M[0]||(M[0]=q=>r.value=q),title:"Import Save",placeholder:"Paste your save here!",class:ne({importingFailed:i.value})},null,8,["modelValue","class"]),f("div",Mr,[Cr,f("div",$r,[f("button",{class:"button",onClick:M[1]||(M[1]=q=>S(o(qe)().id))},"New Game"),Object.keys(o(u)).length>0?(h(),D(gn,{key:0,options:o(u),modelValue:a.value,"onUpdate:modelValue":M[2]||(M[2]=q=>U(q)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):$("",!0)])]),f("div",Tr,[Ir,f("button",{class:"button modal-default-button",onClick:M[3]||(M[3]=q=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var _n=B(Pr,[["__scopeId","data-v-5b5b1604"]]);const le=e=>($e("data-v-b0896196"),e=e(),Te(),e),xr=["src","alt"],Or={key:1,class:"title"},Fr=le(()=>f("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Er={class:"discord"},Dr={class:"discord-links"},Vr={key:0},Rr=["href"],Lr=le(()=>f("li",null,[f("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Ar=le(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),qr={href:"https://forums.moddingtree.com/",target:"_blank"},Br=le(()=>f("span",{class:"material-icons"},"forum",-1)),Ur=le(()=>f("span",{class:"material-icons"},"info",-1)),zr=le(()=>f("span",{class:"material-icons"},"library_books",-1)),Gr=le(()=>f("span",{class:"material-icons"},"settings",-1)),Hr=le(()=>f("span",{class:"material-icons"},"library_books",-1)),jr=le(()=>f("span",{class:"material-icons"},"settings",-1)),Wr=le(()=>f("span",{class:"material-icons"},"info",-1)),Zr={href:"https://forums.moddingtree.com/",target:"_blank"},Kr=le(()=>f("span",{class:"material-icons"},"forum",-1)),Yr={class:"discord"},Jr={class:"discord-links"},Xr={key:0},Qr=["href"],ea=le(()=>f("li",null,[f("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),ta=le(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),na=V({__name:"Nav",setup(e){const t=C(null),n=C(null),s=C(null),i=C(null),{useHeader:r,banner:a,title:l,discordName:u,discordLink:d,versionNumber:v}=A;function _(){window.open(d,"mywindow")}return(y,k)=>(h(),N(X,null,[o(r)?(h(),N("div",De({key:0,class:"nav"},y.$attrs),[o(a)?(h(),N("img",{key:0,src:o(a),class:"banner",alt:o(l)},null,8,xr)):(h(),N("div",Or,R(o(l)),1)),f("div",{onClick:k[0]||(k[0]=w=>{var S;return(S=i.value)==null?void 0:S.open()}),class:"version-container"},[p(j,{display:"Changelog",direction:o(G).Down,class:"version"},{default:F(()=>[f("span",null,"v"+R(o(v)),1)]),_:1},8,["direction"])]),Fr,f("div",Er,[f("span",{onClick:_,class:"material-icons"},"discord"),f("ul",Dr,[o(d)?(h(),N("li",Vr,[f("a",{href:o(d),target:"_blank"},R(o(u)),9,Rr)])):$("",!0),Lr,Ar])]),f("div",null,[f("a",qr,[p(j,{display:"Forums",direction:o(G).Down,yoffset:"5px"},{default:F(()=>[Br]),_:1},8,["direction"])])]),f("div",{onClick:k[1]||(k[1]=w=>{var S;return(S=t.value)==null?void 0:S.open()})},[p(j,{display:"Info",direction:o(G).Down,class:"info"},{default:F(()=>[Ur]),_:1},8,["direction"])]),f("div",{onClick:k[2]||(k[2]=w=>{var S;return(S=n.value)==null?void 0:S.open()})},[p(j,{display:"Saves",direction:o(G).Down,xoffset:"-20px"},{default:F(()=>[zr]),_:1},8,["direction"])]),f("div",{onClick:k[3]||(k[3]=w=>{var S;return(S=s.value)==null?void 0:S.open()})},[p(j,{display:"Settings",direction:o(G).Down,xoffset:"-66px"},{default:F(()=>[Gr]),_:1},8,["direction"])])],16)):(h(),N("div",De({key:1,class:"overlay-nav"},y.$attrs),[f("div",{onClick:k[4]||(k[4]=w=>{var S;return(S=i.value)==null?void 0:S.open()}),class:"version-container"},[p(j,{display:"Changelog",direction:o(G).Right,xoffset:"25%",class:"version"},{default:F(()=>[f("span",null,"v"+R(o(v)),1)]),_:1},8,["direction"])]),f("div",{onClick:k[5]||(k[5]=w=>{var S;return(S=n.value)==null?void 0:S.open()})},[p(j,{display:"Saves",direction:o(G).Right},{default:F(()=>[Hr]),_:1},8,["direction"])]),f("div",{onClick:k[6]||(k[6]=w=>{var S;return(S=s.value)==null?void 0:S.open()})},[p(j,{display:"Settings",direction:o(G).Right},{default:F(()=>[jr]),_:1},8,["direction"])]),f("div",{onClick:k[7]||(k[7]=w=>{var S;return(S=t.value)==null?void 0:S.open()})},[p(j,{display:"Info",direction:o(G).Right},{default:F(()=>[Wr]),_:1},8,["direction"])]),f("div",null,[f("a",Zr,[p(j,{display:"Forums",direction:o(G).Right,xoffset:"7px"},{default:F(()=>[Kr]),_:1},8,["direction"])])]),f("div",Yr,[f("span",{onClick:_,class:"material-icons"},"discord"),f("ul",Jr,[o(d)?(h(),N("li",Xr,[f("a",{href:o(d),target:"_blank"},R(o(u)),9,Qr)])):$("",!0),ea,ta])])],16)),p(Ei,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),p(_n,{ref_key:"savesManager",ref:n},null,512),p(Wi,{ref_key:"options",ref:s},null,512),p(gi,{ref_key:"changelog",ref:i},null,512)],64))}});var yn=B(na,[["__scopeId","data-v-b0896196"]]);const sa={class:"inner-tab"},ia=V({__name:"Game",setup(e){const t=Ce(I,"tabs"),n=x(()=>Object.keys(ie)),s=A.useHeader;function i(r){const{display:a,minimized:l,name:u,color:d,minimizable:v,nodes:_,minimizedDisplay:y}=r;return{display:a,minimized:l,name:u,color:d,minimizable:v,nodes:_,minimizedDisplay:y}}return(r,a)=>(h(),N("div",{class:ne(["tabs-container",{useHeader:o(s)}])},[(h(!0),N(X,null,Kt(o(t),(l,u)=>{var d,v;return h(),N("div",{key:u,class:ne(["tab",o((d=o(ie)[l])==null?void 0:d.classes)]),style:de(o((v=o(ie)[l])==null?void 0:v.style))},[u===0&&!o(s)?(h(),D(yn,{key:0})):$("",!0),f("div",sa,[o(n).includes(l)?(h(),D(di,De({key:0},i(o(ie)[l]),{index:u,onSetMinimized:_=>o(ie)[l].minimized.value=_}),null,16,["index","onSetMinimized"])):(h(),D(Q(l),{key:1,index:u},null,8,["index"]))])],6)}),128))],2))}});var ra=B(ia,[["__scopeId","data-v-3e0f1aab"]]);const aa=V({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(h(),N("div",{style:de({width:e.width,height:e.height})},null,4))}});function bn(e,t="points",n=0,s=void 0){const i=K(e)?e:Qe(e);if(i.displayName=t,i.precision=n,i.small=s,!K(e)){const r=i[ut];r.displayName=t,r.precision=n,r.small=s}return i}function oa(e){const t=Qe(e.value);return ge(e,n=>{It.value||g.gt(n,t.value)&&(t.value=n)}),t}function la(e){const t=Qe(e.value);return ge(e,(n,s)=>{It.value||g.gt(n,s)&&(t.value=g.add(t.value,g.sub(n,s)))}),t}const ua=new g("10^^8"),ca=new g("1e100");function da(e,t){const n=C(0),s=C(0),i=C(0);return ee.on("update",a=>{if(s.value=0,g.lte(e.value,ca)){i.value=e.value;return}let l=e.value,u=i.value;if(i.value=l,g.gt(l,u))if(g.gte(l,ua))l=g.slog(l,1e10),u=g.slog(u,1e10),n.value=l.sub(u).div(a),s.value=-1;else for(;g.div(l,u).log(10).div(a).gte("100")&&s.value<=5&&g.gt(u,0);)l=g.log10(l),u=g.log10(u),n.value=l.sub(u).div(a),s.value++}),x(()=>s.value===0?t?_e(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":_e(n.value)+" OOM"+(s.value<0?"^OOM":"^"+s.value)+"s/sec")}function ct(e,t){const n=t!=null?t:e.value;return g.eq(e.precision,0)?Ge(e.small?n:g.floor(n)):_e(n,e.precision,e.small)}const fa=["x1","y1","x2","y2"],ma=V({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=ae(e),s=x(()=>{const r=n.startNode.value.rect,a=n.boundingRect.value,l=a?{x:r.x+r.width/2-a.x,y:r.y+r.height/2-a.y}:{x:0,y:0};return n.link.value.offsetStart&&(l.x+=n.link.value.offsetStart.x,l.y+=n.link.value.offsetStart.y),l}),i=x(()=>{const r=n.endNode.value.rect,a=n.boundingRect.value,l=a?{x:r.x+r.width/2-a.x,y:r.y+r.height/2-a.y}:{x:0,y:0};return n.link.value.offsetEnd&&(l.x+=n.link.value.offsetEnd.x,l.y+=n.link.value.offsetEnd.y),l});return(r,a)=>(h(),N("line",De({"stroke-width":"15px",stroke:"white"},e.link,{x1:o(s).x,y1:o(s).y,x2:o(i).x,y2:o(i).y}),null,16,fa))}});const ha=V({__name:"Links",props:{links:null},setup(e){var u;const n=Ce(e,"links"),s=C(null),i=rt(Ot,C({})),r=rt(Ft,C(void 0)),a=C((u=s.value)==null?void 0:u.getBoundingClientRect());ge(r,()=>{var d;return a.value=(d=s.value)==null?void 0:d.getBoundingClientRect()}),mt(()=>{var d;return a.value=(d=s.value)==null?void 0:d.getBoundingClientRect()});const l=x(()=>{var v,_;const d=i.value;return(_=(v=n.value)==null?void 0:v.filter(y=>{var k,w;return((k=d[y.startNode.id])==null?void 0:k.rect)&&((w=d[y.startNode.id])==null?void 0:w.rect)}))!=null?_:[]});return(d,v)=>(h(),N(X,null,[o(l)?(h(),N("svg",In(De({key:0},d.$attrs)),[(h(!0),N(X,null,Kt(o(l),(_,y)=>(h(),D(ma,{key:y,link:_,boundingRect:a.value,startNode:o(i)[_.startNode.id],endNode:o(i)[_.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):$("",!0),f("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var ga=B(ha,[["__scopeId","data-v-063f6d6b"]]),pa=V({props:{nodes:{type:L(Array),required:!0},leftSideNodes:L(Array),rightSideNodes:L(Array),branches:L(Array)},components:{Links:ga},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:s}=ae(e),i=me();ke(()=>{const l=he(t);i.value=re(W(()=>p(X,null,[l.map(u=>p("span",{class:"row tree-row",style:"margin: 50px auto;"},[u.map(it)]))])))});const r=me();ke(()=>{const l=he(n);r.value=l?re(W(()=>p("span",{class:"left-side-nodes small"},[l.map(it)]))):""});const a=me();return ke(()=>{const l=he(s);a.value=l?re(W(()=>p("span",{class:"side-nodes small"},[l.map(it)]))):""}),{unref:o,nodesComp:i,leftNodesComp:r,rightNodesComp:a}}});function va(e,t,n,s,i,r){const a=ze("Links");return h(),N(X,null,[(h(),D(Q(e.nodesComp))),e.leftNodesComp?(h(),D(Q(e.leftNodesComp),{key:0})):$("",!0),e.rightNodesComp?(h(),D(Q(e.rightNodesComp),{key:1})):$("",!0),e.branches?(h(),D(a,{key:2,links:e.unref(e.branches)},null,8,["links"])):$("",!0)],64)}var _a=B(pa,[["render",va],["__scopeId","data-v-39ca96d0"]]);const ya={key:0},ba={key:0,class:"mark star"},Na=["src"],ka=V({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(h(),N("div",ya,[e.mark===!0?(h(),N("div",ba)):(h(),N("img",{key:1,class:"mark",src:e.mark},null,8,Na))])):$("",!0)}});var Nn=B(ka,[["__scopeId","data-v-2207999f"]]);const wa=V({__name:"Node",props:{id:null},setup(e){const n=ae(e),s=rt(Pt,()=>{}),i=rt(xt,()=>{}),r=me(null),a=x(()=>r.value&&r.value.parentElement);return ge([a,n.id],([l,u],[d,v])=>{d&&i(o(v)),l&&s(u,l)}),Zt(()=>i(o(n.id))),(l,u)=>(h(),N("div",{class:"node",ref_key:"node",ref:r},null,512))}});var kn=B(wa,[["__scopeId","data-v-a48cb382"]]);const Sa=V({props:{display:L(Object,String,Function),visibility:{type:L(Number,Boolean),required:!0},style:L(String,Object,Array),classes:L(Object),onClick:Function,onHold:Function,color:L(String),glowColor:L(String),canClick:{type:L(Boolean),required:!0},mark:L(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Nn,Node:kn},setup(e){const{onClick:t,onHold:n,display:s}=ae(e),i=je(s),{start:r,stop:a}=cn(t,n);return{start:r,stop:a,comp:i,unref:o,Visibility:He,isCoercableComponent:vt,isVisible:sn,isHidden:rn}}});function Ma(e,t,n,s,i,r){var u;const a=ze("MarkNode"),l=ze("Node");return e.isVisible(e.visibility)?(h(),N("div",{key:0,style:de({visibility:e.isHidden(e.visibility)?"hidden":void 0}),class:ne({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[f("div",{style:de([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(u=e.unref(e.style))!=null?u:[]])},[(h(),D(Q(e.unref(e.comp))))],4),p(a,{mark:e.unref(e.mark)},null,8,["mark"]),p(l,{id:e.id},null,8,["id"])],38)):$("",!0)}var Ca=B(Sa,[["render",Ma],["__scopeId","data-v-4520cd79"]]);const $a=Symbol("TreeNode"),Ta=Symbol("Tree");function Ia(e,...t){const n=t.reduce((s,i)=>{var r;return Object.assign(s,(r=i.getPersistentData)==null?void 0:r.call(i))},{});return Le(()=>{var r,a,l;const s=(r=e==null?void 0:e())!=null?r:{};s.id=pt("treeNode-"),s.type=$a,s[Se]=Ca;for(const u of t)(a=u.preConstruct)==null||a.call(u,s);Object.assign(n),P(s,"visibility"),te(s,"visibility",He.Visible),P(s,"canClick"),te(s,"canClick",!0),P(s,"color"),P(s,"display"),P(s,"glowColor"),P(s,"classes"),P(s,"style"),P(s,"mark");for(const u of t)(l=u.postConstruct)==null||l.call(u,s);if(s.onClick){const u=s.onClick.bind(s);s.onClick=function(d){o(s.canClick)!==!1&&u(d)}}if(s.onHold){const u=s.onHold.bind(s);s.onHold=function(){o(s.canClick)!==!1&&u()}}const i=t.reduce((u,d)=>{var v;return Object.assign(u,(v=d.getGatheredProps)==null?void 0:v.call(d,s))},{});return s[Me]=function(){const{display:u,visibility:d,style:v,classes:_,onClick:y,onHold:k,color:w,glowColor:S,canClick:U,mark:H,id:b}=this;return{display:u,visibility:d,style:v,classes:_,onClick:y,onHold:k,color:w,glowColor:S,canClick:U,mark:H,id:b,...i}},s})}function Pa(e){return Le(()=>{const t=e();return t.id=pt("tree-"),t.type=Ta,t[Se]=_a,t.isResetting=C(!1),t.resettingNode=me(null),t.reset=function(n){var i,r;const s=t;s.isResetting.value=!0,s.resettingNode.value=n,(i=s.resetPropagation)==null||i.call(s,s,n),(r=s.onReset)==null||r.call(s,n),s.isResetting.value=!1,s.resettingNode.value=null},t.links=x(()=>{var s;return(s=o(t.branches))!=null?s:[]}),P(t,"visibility"),te(t,"visibility",He.Visible),P(t,"nodes"),P(t,"leftSideNodes"),P(t,"rightSideNodes"),P(t,"branches"),t[Me]=function(){const{nodes:n,leftSideNodes:s,rightSideNodes:i,branches:r}=this;return{nodes:n,leftSideNodes:s,rightSideNodes:i,branches:r}},t})}const xa=function(e,t){const n=[t];let s=[t];if(e.branches!=null){const i=o(e.branches);for(;s.length>0;){const r=[];s.forEach(a=>{i.filter(l=>l.startNode===a||l.endNode===a).map(l=>l.startNode===a?l.endNode:l.startNode).filter(l=>!n.includes(l)).forEach(l=>{var u;r.includes(l)||(r.push(l),(u=l.reset)==null||u.reset())})}),s=r,n.push(...s)}}};function Oa(e,t=null,n=0){const s=wt(n);return x(()=>t==null||g.gte(e.value,o(s))?ct(e)+" "+e.displayName:`Reach ${g.eq(t.precision,0)?Ge(o(s)):_e(o(s),t.precision)} ${t.displayName} to unlock (You have ${g.eq(t.precision,0)?Ge(t.value):_e(t.value,t.precision)})`)}function Fa(e,...t){return Le(()=>{var s,i;const n=e();for(const r of t)(s=r.preConstruct)==null||s.call(r,n);n.currentGain==null&&(n.currentGain=x(()=>{let r=n.gainModifier?n.gainModifier.apply(n.scaling.currentGain(n)):n.scaling.currentGain(n);return r=g.floor(r).max(0),o(n.buyMax)===!1&&(r=r.min(1)),r})),n.actualGain==null&&(n.actualGain=n.currentGain),n.currentAt==null&&(n.currentAt=x(()=>{let r=n.scaling.currentAt(n);return o(n.roundUpCost)&&(r=g.ceil(r)),r})),n.nextAt==null&&(n.nextAt=x(()=>{let r=n.scaling.nextAt(n);return o(n.roundUpCost)&&(r=g.ceil(r)),r})),n.convert==null&&(n.convert=function(){var a;const r=o(n.currentGain);n.gainResource.value=g.add(n.gainResource.value,r),n.spend(r),(a=n.onConvert)==null||a.call(n,r)}),n.spend==null&&(n.spend=function(){n.baseResource.value=0}),P(n,"currentGain"),P(n,"actualGain"),P(n,"currentAt"),P(n,"nextAt"),P(n,"buyMax"),te(n,"buyMax",!0),P(n,"roundUpCost"),te(n,"roundUpCost",!0);for(const r of t)(i=r.postConstruct)==null||i.call(r,n);return n})}function Ea(e,t){const n=wt(e),s=wt(t);return{currentGain(i){let r=o(i.baseResource.value);if(i.costModifier&&(r=i.costModifier.apply(r)),g.lt(r,o(n)))return 0;const a=g.div(r,o(n)).pow(o(s));return a.isNan()?new g(0):a},currentAt(i){let r=o(i.currentGain);return i.gainModifier&&(r=i.gainModifier.revert(r)),r=g.max(0,r).root(o(s)).times(o(n)),i.costModifier&&(r=i.costModifier.revert(r)),r},nextAt(i){let r=g.add(o(i.currentGain),1).floor();return i.gainModifier&&(r=i.gainModifier.revert(r)),r=g.max(0,r).root(o(s)).times(o(n)).max(o(n)),i.costModifier&&(r=i.costModifier.revert(r)),r}}}function Da(e){return Fa(e)}const wn=e=>($e("data-v-5e2d38ce"),e=e(),Te(),e),Va=wn(()=>f("div",{class:"key"},"Ctrl",-1)),Ra=T("+"),La=wn(()=>f("div",{class:"key"},"Shift",-1)),Aa=T("+"),qa={class:"key"},Ba=V({__name:"Hotkey",props:{hotkey:null},setup(e){const t=e;let n="",s=!1,i=!1,r=!1;return ke(()=>{n=t.hotkey.key,s=n.startsWith("ctrl+"),s&&(n=n.slice(5)),i=n.startsWith("shift+"),i&&(n=n.slice(6)),r=n.length==1&&n.toLowerCase()!=n.toUpperCase(),r&&(n=n.toUpperCase())}),(a,l)=>(h(),N(X,null,[o(s)?(h(),N(X,{key:0},[Va,Ra],64)):$("",!0),o(i)?(h(),N(X,{key:1},[La,Aa],64)):$("",!0),f("div",qa,R(o(n)),1)],64))}});var Ua=B(Ba,[["__scopeId","data-v-5e2d38ce"]]);const _t=ht({}),Vt=Symbol("Hotkey"),jt=[")","!","@","#","$","%","^","&","*","("];function za(e){return Le(()=>{const t=e();return t.type=Vt,P(t,"enabled"),te(t,"enabled",!0),P(t,"description"),t})}ee.on("addLayer",e=>{an(e,Vt).forEach(t=>{_t[t.key]=t})});ee.on("removeLayer",e=>{an(e,Vt).forEach(t=>{_t[t.key]=void 0})});document.onkeydown=function(e){var s;if(((s=e.target)==null?void 0:s.tagName)==="INPUT"||Rt.value&&!I.keepGoing)return;let t=e.key;jt.includes(t)?t="shift+"+jt.indexOf(t):e.shiftKey&&(t="shift+"+t),e.ctrlKey&&(t="ctrl+"+t);const n=_t[t];n&&o(n.enabled)&&(e.preventDefault(),n.onPress())};zs(W(()=>{const e=Object.values(_t).filter(t=>o(t==null?void 0:t.enabled));return e.length===0?"":p("div",null,[p("br",null,null),p("h4",null,[T("Hotkeys")]),p("div",{style:"column-count: 2"},[e.map(t=>p("div",null,[p(Ua,{hotkey:t},null),T(" "),t==null?void 0:t.description]))])])}));const Ga=Symbol("Reset");function Ha(e){return Le(()=>{const t=e();return t.id=pt("reset-"),t.type=Ga,t.reset=function(){var s;const n=i=>{if(i!=null&&typeof i=="object")if(Ve in i){const r=i;r.value=r[Ve]}else!(i instanceof g)&&!K(i)&&Object.values(i).forEach(r=>n(r))};o(t.thingsToReset).forEach(n),ee.emit("reset",t),(s=t.onReset)==null||s.call(t)},P(t,"thingsToReset"),t})}const nt={};ee.on("removeLayer",e=>{var t;(t=nt[e.id])==null||t.call(nt),nt[e.id]=void 0});const ja=V({__name:"Sticky",setup(e){const t=C("0"),n=new ResizeObserver(i),s=me(null);function i(){let r=s.value;if(r==null)return;let a=0;for(;r.previousSibling;){const l=r.previousSibling;l.dataset&&"vSticky"in l.dataset&&(a+=l.offsetHeight),r=l}t.value=a+"px"}return Ee(i),document.fonts.ready.then(i),mt(()=>{var a;const r=(a=s.value)==null?void 0:a.parentElement;r&&n.observe(r)}),(r,a)=>(h(),N("div",{class:"sticky",style:de({top:t.value}),ref_key:"element",ref:s,"data-v-sticky":""},[we(r.$slots,"default",{},void 0,!0)],4))}});var Wa=B(ja,[["__scopeId","data-v-cccac690"]]);const Za=V({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=x(()=>ct(t.resource));return(s,i)=>(h(),N("h2",{style:de({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},R(o(n)),5))}});const Ka={class:"main-display"},Ya={key:0},Ja={key:1},Xa=T(", "),Qa=V({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=ae(e),s=C(null),i=je(n.effectDisplay),r=x(()=>g.lt(n.resource.value,"1e1000"));return(a,l)=>(h(),D(Wa,null,{default:F(()=>{var u,d,v,_;return[f("div",{class:ne(["main-display-container",(u=e.classes)!=null?u:{}]),style:de([{height:`${((v=(d=s.value)==null?void 0:d.$el.clientHeight)!=null?v:0)+50}px`},(_=e.style)!=null?_:{}])},[f("div",Ka,[o(r)?(h(),N("span",Ya,"You have ")):$("",!0),p(Za,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),T(" "+R(e.resource.displayName),1),o(i)?(h(),N("span",Ja,[Xa,(h(),D(Q(o(i)),{ref_key:"effectRef",ref:s},null,512))])):$("",!0)])],6)]}),_:1}))}});function eo(e,t){return P(t,"display"),P(t,"classes"),P(t,"style"),P(t,"direction"),te(t,"direction",G.Up),P(t,"xoffset"),P(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=Qe(!1,!1)),Ee(()=>{const n=e[Se];e[Se]=j;const s=e[Me].bind(e);e[Me]=function(){const{display:r,classes:a,style:l,direction:u,xoffset:d,yoffset:v,pinned:_}=this;return{element:{[Se]:n,[Me]:s},display:r,classes:a,style:o(l),direction:u,xoffset:d,yoffset:v,pinned:_}}.bind(t)}),t}var to=V({props:{display:{type:L(Object,String,Function),required:!0},visibility:{type:L(Number,Boolean),required:!0},style:L(Object,String,Array),classes:L(Object),onClick:Function,onHold:Function,canClick:{type:L(Boolean),required:!0},small:Boolean,mark:L(Boolean,String),id:{type:String,required:!0}},components:{Node:kn,MarkNode:Nn},setup(e){const{display:t,onClick:n,onHold:s}=ae(e),i=me("");ke(()=>{var v;const l=he(t);if(l==null){i.value="";return}if(vt(l)){i.value=re(l);return}const u=re((v=l.title)!=null?v:"","h3"),d=re(l.description,"div");i.value=re(W(()=>p("span",null,[l.title!=null?p("div",null,[p(u,null,null)]):null,p(d,null,null)])))});const{start:r,stop:a}=cn(n,s);return{start:r,stop:a,comp:i,Visibility:He,isVisible:sn,isHidden:rn,unref:o}}});function no(e,t,n,s,i,r){var u;const a=ze("MarkNode"),l=ze("Node");return e.isVisible(e.visibility)?(h(),N("button",{key:0,style:de([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(u=e.unref(e.style))!=null?u:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:ne({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(h(),D(Q(e.unref(e.comp)),{key:0})):$("",!0),p(a,{mark:e.unref(e.mark)},null,8,["mark"]),p(l,{id:e.id},null,8,["id"])],38)):$("",!0)}var so=B(to,[["render",no],["__scopeId","data-v-211328c0"]]);const io=Symbol("Clickable");function ro(e,...t){const n=t.reduce((s,i)=>{var r;return Object.assign(s,(r=i.getPersistentData)==null?void 0:r.call(i))},{});return Le(()=>{var r,a,l;const s=(r=e==null?void 0:e())!=null?r:{};s.id=pt("clickable-"),s.type=io,s[Se]=so;for(const u of t)(a=u.preConstruct)==null||a.call(u,s);if(Object.assign(s,n),P(s,"visibility"),te(s,"visibility",He.Visible),P(s,"canClick"),te(s,"canClick",!0),P(s,"classes"),P(s,"style"),P(s,"mark"),P(s,"display"),s.onClick){const u=s.onClick.bind(s);s.onClick=function(d){o(s.canClick)!==!1&&u(d)}}if(s.onHold){const u=s.onHold.bind(s);s.onHold=function(){o(s.canClick)!==!1&&u()}}for(const u of t)(l=u.postConstruct)==null||l.call(u,s);const i=t.reduce((u,d)=>{var v;return Object.assign(u,(v=d.getGatheredProps)==null?void 0:v.call(d,s))},{});return s[Me]=function(){const{display:u,visibility:d,style:v,classes:_,onClick:y,onHold:k,canClick:w,small:S,mark:U,id:H}=this;return{display:u,visibility:d,style:o(v),classes:_,onClick:y,onHold:k,canClick:w,small:S,mark:U,id:H,...i}},s})}function ao(e){return ro(()=>{const t=e();P(t,"showNextAt"),te(t,"showNextAt",!0),te(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=x(()=>g.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):P(t,"resetDescription"),t.display==null&&(t.display=W(()=>p("span",null,[o(t.resetDescription),p("b",null,[ct(t.conversion.gainResource,g.max(o(t.conversion.actualGain),o(t.minimumGain)))])," ",t.conversion.gainResource.displayName,o(t.showNextAt)!=null?p("div",null,[p("br",null,null),o(t.conversion.buyMax)?"Next:":"Req:"," ",ct(t.conversion.baseResource,o(t.conversion.buyMax)||g.floor(o(t.conversion.actualGain)).neq(1)?o(t.conversion.nextAt):o(t.conversion.currentAt))," ",t.conversion.baseResource.displayName]):null]))),t.canClick==null&&(t.canClick=x(()=>g.gte(o(t.conversion.actualGain),o(t.minimumGain))));const n=t.onClick;return t.onClick=function(s){o(t.canClick)!==!1&&(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[Ve]),n==null||n(s))},t})}function oo(e){return Ia(()=>{const t=e();return P(t,"display"),te(t,"display",t.layerID),P(t,"append"),{...t,display:t.display,onClick:o(t.append)?function(){if(I.tabs.includes(t.layerID)){const n=I.tabs.lastIndexOf(t.layerID);I.tabs.splice(n,1)}else I.tabs.push(t.layerID)}:function(){I.tabs.splice(1,1,t.layerID)}}})}const Wt="p",dt=Et(Wt,function(){const e="Prestige",t="#4BDC13",n=bn(0,"prestige points"),s=Da(()=>({scaling:Ea(10,.5),baseResource:ft.points,gainResource:n,roundUpCost:!0})),i=Ha(()=>({thingsToReset:()=>[dt]})),r=oo(()=>({layerID:Wt,color:t,reset:i}));eo(r,{display:Oa(n),pinnable:!0});const a=ao(()=>({conversion:s,tree:ft.tree,treeNode:r})),l=za(()=>({description:"Reset for prestige points",key:"p",onPress:a.onClick}));return{name:e,color:t,points:n,display:W(()=>p(X,null,[p(Qa,{resource:n,color:t},null),Xe(a)])),treeNode:r,hotkey:l}}),ft=Et("main",function(){const e=bn(10),t=oa(e),n=la(e),s=x(()=>new g(1));ee.on("update",a=>{e.value=g.add(e.value,g.times(s.value,a))});const i=da(e,s),r=Pa(()=>({nodes:[[dt.treeNode]],branches:[],onReset(){e.value=At(this.resettingNode.value)===At(dt.treeNode)?0:10,t.value=e.value,n.value=e.value},resetPropagation:xa}));return{name:"Tree",links:r.links,display:W(()=>p(X,null,[I.devSpeed===0?p("div",null,[T("Game Paused")]):null,I.devSpeed!=null&&I.devSpeed!==0&&I.devSpeed!==1?p("div",null,[T("Dev Speed: "),_e(I.devSpeed),T("x")]):null,I.offlineTime!=null&&I.offlineTime!==0?p("div",null,[T("Offline Time: "),gt(I.offlineTime)]):null,p("div",null,[g.lt(e.value,"1e1000")?p("span",null,[T("You have ")]):null,p("h2",null,[_e(e.value)]),g.lt(e.value,"1e1e6")?p("span",null,[T(" points")]):null]),g.gt(s.value,0)?p("div",null,[T("("),i.value,T(")")]):null,p(aa,null,null),Xe(r)])),points:e,best:t,total:n,oomps:i,tree:r}}),lo=e=>[ft,dt],Rt=x(()=>!1);function uo(e,t){}var co=Object.freeze(Object.defineProperty({__proto__:null,main:ft,getInitialLayers:lo,hasWon:Rt,fixOldSave:uo},Symbol.toStringTag,{value:"Module"}));const et=e=>($e("data-v-4a50ce42"),e=e(),Te(),e),fo={class:"game-over-modal-header"},mo=["src","alt"],ho={class:"game-over-modal-title"},go=et(()=>f("h2",null,"Congratulations!",-1)),po={key:0},vo=et(()=>f("br",null,null,-1)),_o=et(()=>f("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),yo=et(()=>f("br",null,null,-1)),bo=["href"],No=et(()=>f("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),ko=V({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:s,discordLink:i,versionNumber:r,versionTitle:a}=A,l=x(()=>gt(I.timePlayed)),u=x(()=>Rt.value&&!I.keepGoing),d=Ce(I,"autosave");function v(){I.keepGoing=!0}function _(){Oe(qe())}return(y,k)=>(h(),D(Re,{"model-value":o(u)},{header:F(()=>[f("div",fo,[o(n)?(h(),N("img",{key:0,class:"game-over-modal-logo",src:o(n),alt:o(t)},null,8,mo)):$("",!0),f("div",ho,[go,f("h4",null,"You've beaten "+R(o(t))+" v"+R(o(r))+": "+R(o(a)),1)])])]),body:F(({shown:w})=>[w?(h(),N("div",po,[f("div",null,"It took you "+R(o(l))+" to beat the game.",1),vo,_o,yo,f("div",null,[f("a",{href:o(i),class:"game-over-modal-discord-link"},[No,T(" "+R(o(s)),1)],8,bo)]),p(ve,{title:"Autosave",modelValue:o(d),"onUpdate:modelValue":k[0]||(k[0]=S=>K(d)?d.value=S:null)},null,8,["modelValue"])])):$("",!0)]),footer:F(()=>[f("div",{class:"game-over-footer"},[f("button",{onClick:v,class:"button"},"Keep Going"),f("button",{onClick:_,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var wo=B(ko,[["__scopeId","data-v-4a50ce42"]]);const yt=e=>($e("data-v-336bf74f"),e=e(),Te(),e),So=yt(()=>f("div",{class:"nan-modal-header"},[f("h2",null,"NaN value detected!")],-1)),Mo={key:0},Co=yt(()=>f("br",null,null,-1)),$o=["href"],To=yt(()=>f("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Io=yt(()=>f("br",null,null,-1)),Po={class:"nan-footer"},xo=V({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=A,s=C(!0),i=C(!0),r=Ce(Z,"hasNaN"),a=C(null);ge(r,y=>{y?(s.value=I.autosave,i.value=I.devSpeed===0):(I.autosave=s.value,I.devSpeed=i.value?0:null)});const l=x(()=>{var y;return(y=Z.NaNPath)==null?void 0:y.join(".")}),u=x(()=>Z.NaNPersistent!=null?Z.NaNPersistent.value:null);function d(){Z.NaNPersistent!=null&&(Z.NaNPersistent.value=new g(0),Z.hasNaN=!1)}function v(){Z.NaNPersistent&&(Z.NaNPersistent.value=new g(1),Z.hasNaN=!1)}function _(){Z.NaNPersistent&&(Z.NaNPersistent.value=new g(NaN),Z.hasNaN=!1)}return(y,k)=>(h(),N(X,null,[p(Re,De({modelValue:o(r),"onUpdate:modelValue":k[4]||(k[4]=w=>K(r)?r.value=w:null)},y.$attrs),{header:F(()=>[So]),body:F(()=>[f("div",null,[T(' Attempted to assign "'+R(o(l))+'" to NaN',1),o(u)?(h(),N("span",Mo,R(" ")+"(previously "+R(o(_e)(o(u)))+")",1)):$("",!0),T(". Auto-saving has been "+R(s.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Co,f("div",null,[f("a",{href:o(n)||"https://discord.gg/WzejVAx",class:"nan-modal-discord-link"},[To,T(" "+R(o(t)||"The Paper Pilot Community"),1)],8,$o)]),Io,p(ve,{title:"Autosave",modelValue:s.value,"onUpdate:modelValue":k[0]||(k[0]=w=>s.value=w)},null,8,["modelValue"]),o(A).enablePausing?(h(),D(ve,{key:0,title:"Pause game",modelValue:i.value,"onUpdate:modelValue":k[1]||(k[1]=w=>i.value=w)},null,8,["modelValue"])):$("",!0)]),footer:F(()=>[f("div",Po,[f("button",{onClick:k[2]||(k[2]=w=>{var S;return(S=a.value)==null?void 0:S.open()}),class:"button"},"Open Saves Manager"),f("button",{onClick:d,class:"button"},"Set to 0"),f("button",{onClick:v,class:"button"},"Set to 1"),o(u)&&o(g).neq(o(u),0)&&o(g).neq(o(u),1)?(h(),N("button",{key:0,onClick:k[3]||(k[3]=w=>r.value=!1),class:"button"}," Set to previous ")):$("",!0),f("button",{onClick:_,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),p(_n,{ref_key:"savesManager",ref:a},null,512)],64))}});var Oo=B(xo,[["__scopeId","data-v-336bf74f"]]);const Fo={key:0,class:"tpsDisplay"},Eo={key:0,class:"low"},Do=V({__name:"TPS",setup(e){const t=x(()=>g.div(Z.lastTenTicks.length,Z.lastTenTicks.reduce((r,a)=>r+a,0))),n=C([]);ke(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const s=x(()=>n.value.reduce((r,a)=>g.max(r,a),0)),i=x(()=>g.sub(t.value,s.value).gt(1));return(r,a)=>o(t).isNan()?$("",!0):(h(),N("div",Fo,[T(" TPS: "+R(o(Ge)(o(t)))+" ",1),p(Ct,{name:"fade"},{default:F(()=>[o(i)?(h(),N("span",Eo,R(o(Ge)(o(s))),1)):$("",!0)]),_:1})]))}});var Vo=B(Do,[["__scopeId","data-v-46a3ed5b"]]);var Ro=V({__name:"App",setup(e){const t=A.useHeader,n=x(()=>Tt[Y.theme].variables),s=Ce(Y,"showTPS"),i=x(()=>re(W(()=>p(X,null,[Gs.map(Xe)]))));return(r,a)=>(h(),N(X,null,[f("div",{id:"modal-root",style:de(o(n))},null,4),f("div",{class:ne(["app",{useHeader:o(t)}]),style:de(o(n))},[o(t)?(h(),D(yn,{key:0})):$("",!0),p(ra),o(o(s))?(h(),D(Vo,{key:1})):$("",!0),p(wo),p(Oo),(h(),D(Q(o(i))))],6)],64))}});var Lo=B(Ro,[["__scopeId","data-v-41d15e5e"]]);ee.on("setupVue",e=>e.use(En));function Ao(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisterError:r}=e;let a,l;const u=async(d=!0)=>{d&&(a==null||a.addEventListener("controlling",v=>{v.isUpdate&&window.location.reload()})),l&&l.waiting&&await Rn(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){a=new Vn("./sw.js",{scope:"./",type:"classic"}),a.addEventListener("activated",d=>{d.isUpdate||s==null||s()});{const d=()=>{n==null||n()};a.addEventListener("waiting",d),a.addEventListener("externalwaiting",d)}a.register({immediate:t}).then(d=>{l=d,i==null||i(d)}).catch(d=>{r==null||r(d)})}return u}function qo(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisterError:r}=e,a=C(!1),l=C(!1);return{updateServiceWorker:Ao({immediate:t,onNeedRefresh(){a.value=!0,n==null||n()},onOfflineReady(){l.value=!0,s==null||s()},onRegistered:i,onRegisterError:r}),offlineReady:l,needRefresh:a}}document.title=A.title;window.projInfo=A;if(A.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await As();const{globalBus:e}=await at(()=>Promise.resolve().then(function(){return Rs}),void 0),{startGameLoop:t}=await at(()=>import("./gameLoop.4426b9a8.js"),["assets/gameLoop.4426b9a8.js","assets/@fontsource.f66d05e7.css","assets/vue.84036b60.js","assets/lz-string.731cedc5.js","assets/@vue.4ce677c2.js","assets/nanoevents.1080beb7.js","assets/vue-next-select.fc90abc3.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.d7ae4e1e.js","assets/sortablejs.d0b0aa19.js","assets/vue-textarea-autosize.35804eaf.js","assets/vue-toastification.4982b895.js","assets/vue-toastification.4b5f8ac8.css","assets/workbox-window.8d14e8b7.js"]),n=window.vue=Pn(Lo);e.emit("setupVue",n),n.mount("#app"),Ee(()=>{const s=Dn(),{updateServiceWorker:i}=qo({onNeedRefresh(){s.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){s.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(r){r&&setInterval(()=>r.update(),60*60*1e3)}})}),t()});export{g as D,at as _,Z as a,A as b,co as c,ee as g,It as l,I as p,Y as s};
